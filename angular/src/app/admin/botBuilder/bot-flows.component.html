<div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper container-xxl p-0">
        <div class="content-body">
            <div class="d-flex flex-column flex-column-fluid">
                <sub-header [title]="'botFlows' | localize" [description]="'flows' | localize"> </sub-header>
                <div [ngClass]="theme != 'theme12' ? 'container' : ''">
                    <div class="card-custom gutter-b card">
                        <div class="card-body">
                            <div class="row mb-2">
                                <div class="col-md-12 col-12 text-right pl-1">
                                    <button (click)="createBotFlow.show()" class="btn btn-outline-primary-info mr-1"><i
                                            class="fa fa-plus"></i> {{ "Add" | localize }}</button>
                                </div>
                            </div>
                            <div class="align-items-center">
                                <!--<Primeng-TurboTable-Start>-->
                                <div class="align-items-center">
                                    <div [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : 'light'"
                                        class="primeng-datatable-container p-0" >
                                        <p-table
                                            #dataTable
                                            [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : 'light'"
                                            (onLazyLoad)="getFlows($event)"
                                            rows="20"
                                            [value]="primengTableHelper.records"
                                            [loading]="primengTableHelper.isLoading"
                                             class="table-responsive"
                                            [paginator]="false"
                                            [lazy]="true"  
                                            responsiveLayout="stack"
                                            [breakpoint]="'960px'"
                                            [resizableColumns]="primengTableHelper.resizableColumns"
                                            [totalRecords]="primengTableHelper.totalRecordsCount"
                                            >

                                            
                                            
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''">
                                                    </th>
                                                    <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                        pSortableColumn="AreaNames">{{ l("Name") }}</th>
                                                    <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                        pSortableColumn="AboveValue">{{ l("Deployment Status") }}</th>
                                                    <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                        pSortableColumn="AboveValue">{{ l("Type") }}</th>
                                                    <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                        pSortableColumn="AboveValue">{{ l("modified") }}</th>
                                                    <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                        pSortableColumn="AboveValue">{{ l("Bot Channel") }}</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                                <tr>
                                                    <td
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                        <div class="btn-group dropdown" dropdown container="body">
                                                            <button
                                                                [ngClass]="theme != 'theme12' ? 'btn-primary' : 'btn-primary-info'"
                                                                class="dropdown-toggle btn btn-sm" dropdownToggle>
                                                                <i class="fa fa-cog"></i><span class="caret"></span>
                                                            </button>
                                                            <ul [ngClass]="darkModeService.currentSkin === 'dark' ? 'drop-down-dark' : ''"
                                                                class="dropdown-menu" *dropdownMenu>
                                                                <li>
                                                                    <a (click)="edit(record.id,record)" class="dropdown-item"
                                                                        href="javascript:;">{{ l("Edit") }}</a>
                                                                </li>
                                                                <li>
                                                                    <a (click)="deleteBotFlows(record.id,record)"
                                                                        class="dropdown-item" href="javascript:;">{{
                                                                        l("Delete") }}</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                    <td
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                        <span class="p-column-title"> {{ l("Name") }}</span>
                                                        {{record.flowName}}
                                                    </td>
                                                    <td
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                        <span class="p-column-title"> {{ l("status") }}</span>
                                                        <div  class=" md-checkbox-list form-check form-switch">
                                                            <div class="row md-checkbox-list  form-switch branch-status">
                                                                <input [disabled]="record.getBotFlowForViewDto === undefined" (click)="askForDeploy(record)" class="form-check-input" id="status" type="checkbox" name="status"  [(ngModel)]="record.isPublished"/>
                                                            </div>

                                                        </div>
                                                    </td>

                                                    <td
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                    <span class="p-column-title"> {{ l("Type") }}</span>
                                                    <span *ngIf="record.statusId != 4">
                                                        <i class="bi bi-box-arrow-in-left text-success"></i>
                                                        Inbound</span>
                                                    <span *ngIf="record.statusId === 4">
                                                        <i class="bi bi-box-arrow-right text-danger"></i>
                                                        Outbound </span>
                                                </td>
                                                    <td
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                        <span class="p-column-title"> {{ l("modified") }}</span>
                                                        {{record.modifiedDate | momentFormat: "L"}}
                                                    </td>

                                                    <td
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''">
                                                    <!-- <span class="p-column-title"> {{ l("botChannel") }}</span>
                                                        {{record.botChannel}} -->

                                                          <div *ngIf="record.botChannel === 'facebook'" class="facebook-logo">
                                                            <i class="fab fa-facebook-f"></i>
                                                          </div>

                                                          <div *ngIf="record.botChannel === 'whatsapp'"class="whatsapp-logo">
                                                            <i class="fab fa-whatsapp"></i>
                                                          </div>

                                                          <div *ngIf="record.botChannel === 'instagram'"class="instagram-logo">
                                                            <i class="fab fa-instagram"></i>
                                                          </div>
                                                     </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
                                            {{ l("NoData") }}
                                        </div>
                                        <div class="primeng-paging-container">
                                            <p-paginator
                                                [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark' : ''"
                                                [rows]="20" #paginator (onPageChange)="getFlows($event)"
                                                [totalRecords]="primengTableHelper.totalRecordsCount"
                                                [rowsPerPageOptions]="[10, 20, 30]"
                                                >
                                            </p-paginator>
                                            <span class="total-records-count">
                                                {{ l("TotalRecordsCount", primengTableHelper.totalRecordsCount) }}
                                            </span>
                                        </div>
                                    </div>
                                    <!--<Primeng-Datatable-End>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<createBotFlow #createBotFlow (modalSave)="getFlows()"></createBotFlow>