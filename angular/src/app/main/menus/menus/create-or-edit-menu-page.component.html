<div class="menu">
    <div class="header-navbar-shadow"
     ></div>
    <div class="content-wrapper container-xxl p-0">
        <div class="content-body">
            <div class="d-flex flex-column flex-column-fluid">
                <div class="content-header row  content-header row  subheader subheader-transparent align-items-center  d-flex flex-sm-nowrap flex-wrap justify-content-between"
                    [ngClass]="theme != 'theme12'? 'container' : ''">
                    <div class=" content-header-left col-md-9 col-12 mb-2">
                        <div class="row breadcrumbs-top">
                            <div class="col-12 d-flex">
                                <h2 class="text content-header-title float-left mb-0">{{ l("menus") }}</h2>
                                <div class="breadcrumb-wrapper d-flex">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item cursor-pointer">
                                            <a (click)="goToDashboard()">{{ l("home") }}</a>
                                        </li>
                                        <li class="breadcrumb-item cursor-pointer ">
                                            <a (click)="back()">{{ l("previus") }}</a>
                                        </li>
                                        <li class="breadcrumb-item ">
                                            <span>{{ l("createMenu") }}</span>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div [ngClass]="theme != 'theme12' ? 'container' : ''">
                    <form [formGroup]="menuForm">
                        <div class="card-custom gutter-b card"
                         >
                            <div class="card-body">
                                <div class="row p-0 p-xxl-2 p-md-2">
                                    <div class="col-6 mb-1" *ngIf="isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("menuNameAr") }}: *</label>
                                            <input required
                                                [class.error]="submitted && menuForm.controls.menuName.invalid"
                                                type="text"
                                                class="form-control"
                                                formControlName="menuName" />
                                            <p class="text-danger"
                                                *ngIf="submitted && menuForm.controls.menuName.invalid">This field is
                                                required</p>
                                        </div>
                                    </div>
                                    <div class="col-6 mb-1" *ngIf="!isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("menuNameEn") }}:</label>
                                            <input disabled  type="text"
                                             class="form-control"
                                                formControlName="menuName" />
                                        </div>
                                    </div>

                                    <!-- <div class="col-6 mb-1" *ngIf="isAdmin">
                                        <div class="form-group">
                                            <label>Menu Description Arabic:</label>
                                            <input placeholder="Menu Descreption Arabic" type="text" class="form-control" formControlName="menuDescription" />
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-6 mb-1" *ngIf="!isAdmin">
                                        <div class="form-group">
                                            <label>Menu Descreption Arabic:</label>
                                            <input disabled placeholder="Menu Description Arabic" type="text" class="form-control" formControlName="menuDescription" />
                                        </div>
                                    </div> -->

                                    <div class="col-6 mb-1" *ngIf="isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("menuNameEn") }}: *</label>
                                            <input required
                                                [class.error]="submitted && menuForm.controls.menuNameEnglish.invalid"
                                                type="text"
                                                class="form-control"
                                                formControlName="menuNameEnglish" />
                                            <p class="text-danger"
                                                *ngIf="submitted && menuForm.controls.menuNameEnglish.invalid">This
                                                field is
                                                required</p>
                                        </div>
                                    </div>
                                    <div class="col-6 mb-1" *ngIf="!isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("menuNameEn") }}:</label>
                                            <input disabled  type="text"
                                               class="form-control"
                                                formControlName="menuNameEnglish" />
                                        </div>
                                    </div>

                                    <!-- <div class="col-6 mb-1" *ngIf="isAdmin">
                                        <div class="form-group">
                                            <label>Menu Description English:</label>
                                            <input placeholder="Menu Description English" type="text" class="form-control" formControlName="menuDescriptionEnglish" />
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-6 mb-1" *ngIf="!isAdmin">
                                        <div class="form-group">
                                            <label>Menu Description English:</label>
                                            <input disabled placeholder="Menu Description English" type="text" class="form-control" formControlName="menuDescriptionEnglish" />
                                        </div>
                                    </div> -->

                                    <div class="col-6 mb-1" *ngIf="isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("priority") }}:</label>
                                            <input min="0"  type="number"
                                                class="form-control"
                                                formControlName="priority" />
                                                

                                        </div>
                                    </div>
                                    <div class="col-6 mb-1" *ngIf="!isAdmin">
                                        <div class="form-group">
                                            <label>{{ l("priority") }}:</label>
                                            <input  disabled  type="number"
                                                class="form-control"
                                                formControlName="priority" />
                                        </div>
                                    </div>

                                    <div class="col-6 mb-1" *ngIf="isNf && isAdmin">
                                        <div class="form-group">
                                            <label for="aantal">{{ l("branch") }}</label>

                                            <select
                                                [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                formControlName="restaurantsType" required>
                                                <option *ngFor="let rTy of rType" [value]="rTy.id">{{ rTy.name }}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-6 mb-1" *ngIf="isNf && !isAdmin">
                                        <div class="form-group">
                                            <label for="aantal">{{ l("bracnh") }}</label>
                                            <input disabled placeholder="ShopsType" type="text"
                                                class="form-control"
                                                formControlName="restaurantsType" />
                                        </div>
                                    </div>

                                    <div class="col-12" *ngIf="isAdmin">
                                        <div class="col-12 col-xl-6 mb-1">
                                            <label for="uplode1">{{ l("logoImage") }}</label>
                                            <input type="file" id="uplode1"
                                                class="form-control"
                                                (change)="onFileChange1($event)" />
                                        </div>
                                        <div class="col-12 col-xl-6 mb-1">
                                            <div *ngIf="menuImage">
                                                <img class="logoImage2 mt-2 product-img" alt="Menu Image" [src]="menuImage" />
                                            </div>
                                            <div class="row mt-1" *ngIf="menuImage">
                                                <div class="col-3 p-0">
                                                    <button class="btn btn-primary-info"
                                                        (click)="openFileUploder1()">Replace</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12" *ngIf="!isAdmin">
                                        <div class="col-12 col-xl-6 mb-1">
                                            <label for="uplode1">{{ l("logoImage") }}</label>
                                            <input type="file" id="uplode1"
                                                class="form-control"
                                                (change)="onFileChange1($event)" />
                                        </div>
                                        <div class="col-12 col-xl-6 mb-1">
                                            <div *ngIf="menuImage">
                                                <img class="logoImage2 mt-2 product-img"  alt="Menu Image"  [src]="menuImage" />
                                            </div>
                                            <div class="row mt-1" *ngIf="menuImage">
                                                <div class="col-3 p-0">
                                                    <button disabled class="btn btn-primary-info"
                                                        (click)="openFileUploder1()">Replace</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- <div class="col-md-4" >
                                <label  for="aantal">Language</label>

                                <select class="form-control"    formControlName="languageBotId"  style="font-family: system-ui; direction: rtl;" >                               
                                    <option *ngFor="let lang of languageBot"[value]="lang.id" >{{lang.name}}</option>
                                  </select>

                              </div> -->
                                </div>
                            </div>
                        </div>

                        <div *ngIf="isMall">
                            <div>
                                <div class="row">
                                    <div *ngFor="let X of menuForm['controls'].category['controls']; let ix = index">
                                        <div formGroupName="{{ ix }}">
                                            <div class="col-6 mb-1" *ngIf="isAdmin">
                                                <input [placeholder]="'categoryNameAr' | localize" class="form-control"
                                                    type="text" formControlName="name" />
                                            </div>
                                            <div class="col-6 mb-1" *ngIf="!isAdmin">
                                                <input disabled [placeholder]="'categoryNameAr' | localize"
                                                   class="form-control"
                                                    type="text" formControlName="name" />
                                            </div>

                                            <div class="col-6 mb-1" *ngIf="isAdmin">
                                                <input [placeholder]="'categoryNameEn' | localize"
                                                    class="form-control"
                                                    type="text" formControlName="nameEnglish" />
                                            </div>
                                            <div class="col-6 mb-1" *ngIf="!isAdmin">
                                                <input disabled [placeholder]="'categoryNameEn' | localize"
                                                    class="form-control"
                                                    type="text" formControlName="nameEnglish" />
                                            </div>

                                            <div class="col mb-1 mt-1 text-right" *ngIf="isAdmin">
                                                <button class="btn btn-danger btn-sm" (click)="deleteCategoryItem(ix)">
                                                    <i class="fa fa-trash p-0 font-12"></i>
                                                </button>
                                            </div>

                                            <div formArrayName="subcategory">
                                                <div
                                                    *ngFor="let Y of X['controls'].subcategory['controls']; let iy = index">
                                                    <div class="card-custom gutter-b card"
                                                        >
                                                        <div class="card-body p-3">
                                                            <div formGroupName="{{ iy }}">
                                                                <div class="row category-card-header">
                                                                    <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                        <input [placeholder]="'categoryNameAr' | localize"
                                                                            class="from-control"
                                                                            type="text" formControlName="namesub" />
                                                                    </div>
                                                                    <div class="col-6 mb-1" *ngIf="!isAdmin">
                                                                        <input disabled
                                                                        [placeholder]="'categoryNameAr' | localize"
                                                                            class="form-control"
                                                                            type="text" formControlName="namesub" />
                                                                    </div>

                                                                    <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                        <input [placeholder]="'categoryNameEn' | localize"
                                                                           class="from-control"
                                                                            type="text"
                                                                            formControlName="nameEnglishsub" />
                                                                    </div>
                                                                    <div class="col-6 mb-1" *ngIf="!isAdmin">
                                                                        <input disabled
                                                                        [placeholder]="'categoryNameEn' | localize"
                                                                            class="form-control"
                                                                            type="text"
                                                                            formControlName="nameEnglishsub" />
                                                                    </div>

                                                                    <div class="col mb-1 mt-1 text-right"
                                                                        *ngIf="isAdmin">
                                                                        <button class="btn btn-danger btn-sm"
                                                                            (click)="deleteCategorySubItem(ix, iy)">
                                                                            <i class="fa fa-trash p-0 font-12"></i>
                                                                        </button>
                                                                    </div>
                                                                </div>

                                                                <div formArrayName="items">
                                                                    <div
                                                                        *ngFor="let Z of Y['controls'].items['controls']; let iz = index">
                                                                        <div formGroupName="{{ iz }}">
                                                                            <div class="row">

                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <input
                                                                                    [placeholder]="'itemNameAr' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemName" />

                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <input disabled
                                                                                    [placeholder]="'itemNameAr' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemName" />
                                                                                </div>

                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <textarea
                                                                                    [placeholder]="'itemdescAr' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemDescription">
                                                                                    </textarea>
                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <textarea disabled
                                                                                    [placeholder]="'itemdescAr' | localize"
                                                                                       class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemDescription">
                                                                                    </textarea>
                                                                                </div>

                                                                                <!-- <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <input placeholder="SKU #" class="form-control" type="text" formControlName="sku" />
                                                                                </div>
                                                                                <div class="col-6 mb-1" *ngIf="!isAdmin">
                                                                                    <input disabled placeholder="SKU #" class="form-control" type="text" formControlName="sku" />
                                                                                </div> -->

                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <input  [placeholder]="'priority' | localize"
                                                                                        class="form-control" type="text"
                                                                                        formControlName="priority" />
                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <input disabled
                                                                                    [placeholder]="'priority' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="priority" />
                                                                                </div>

                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <input  [placeholder]="'Price' | localize"
                                                                                        class="form-control"
                                                                                        type="number"
                                                                                        formControlName="price" />
                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <input disabled  [placeholder]="'Price' | localize"
                                                                                        class="form-control"
                                                                                        type="number"
                                                                                        formControlName="price" />
                                                                                </div>

                                                                                <div
                                                                                    class="col-md-3 form-check form-switch switch">
                                                                                    <input class="form-check-input"
                                                                                        type="checkbox"
                                                                                        formControlName="isInService" />
                                                                                    <label for="isInService">
                                                                                        {{ l("isAvailable") }}</label>
                                                                                </div>

                                                                                <div class="col-12 mb-1"
                                                                                    *ngIf="isAdmin">
                                                                                    <label>{{ l("Image") }}</label>
                                                                                    <input type="file" id="uplode"
                                                                                       class="form-control"
                                                                                        [ngStyle]="{ visibility: getImage(ix, iy, iz).length > 0 ? 'hidden' : 'visible' }"
                                                                                        (change)="onFileChange($event, ix, iy, iz)" />
                                                                                    <div
                                                                                        *ngIf="getImage(ix, iy, iz).length > 0">
                                                                                        <img
                                                                                            [src]="getImage(ix, iy, iz)" />
                                                                                        <button
                                                                                            class="btn btn-primary-info w-100 btn-sm"
                                                                                            (click)="openFileUploder(ix, iy, iz)">
                                                                                            Replace
                                                                                        </button>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <label>{{ l("Image") }}</label>
                                                                                    <input disabled type="file"
                                                                                        id="uplode"
                                                                                        class="form-control"
                                                                                        [ngStyle]="{ visibility: getImage(ix, iy, iz).length > 0 ? 'hidden' : 'visible' }"
                                                                                        (change)="onFileChange($event, ix, iy, iz)" />
                                                                                    <div
                                                                                        *ngIf="getImage(ix, iy, iz).length > 0">
                                                                                        <img class="product-img"  alt="Menu Image" 
                                                                                            [src]="getImage(ix, iy, iz)" />
                                                                                        <button disabled
                                                                                            class="btn btn-primary-info w-100 btn-sm"
                                                                                            (click)="openFileUploder(ix, iy, iz)">
                                                                                            Replace
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <input
                                                                                        placeholder="Item Name English"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemNameEnglish" />
                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <input disabled
                                                                                    [placeholder]="'itemNameEn' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        style="font-family: system-ui; direction: rtl"
                                                                                        formControlName="itemNameEnglish" />
                                                                                </div>

                                                                                <div class="col-6 mb-1" *ngIf="isAdmin">
                                                                                    <textarea
                                                                                    [placeholder]="'itemdescEn' | localize"
                                                                                        class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemDescriptionEnglish">
                                                                                    </textarea>
                                                                                </div>
                                                                                <div class="col-6 mb-1"
                                                                                    *ngIf="!isAdmin">
                                                                                    <textarea disabled
                                                                                    [placeholder]="'itemDesceEn' | localize"
                                                                                       class="form-control"
                                                                                        type="text"
                                                                                        formControlName="itemDescriptionEnglish">
                                                                                    </textarea>
                                                                                </div>

                                                                                <div class="col mt-1 text-right"
                                                                                    *ngIf="isAdmin">
                                                                                    <button
                                                                                        class="btn btn-danger btn-sm"
                                                                                        (click)="deleteItem(ix, iy, iz)">
                                                                                        <i
                                                                                            class="fa fa-trash p-0 font-12"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row mb-1" *ngIf="isAdmin">
                                                                                <div class="col-md-10 text-right">
                                                                                    <input type="button"
                                                                                        class="btn btn-secondary"
                                                                                        (click)="addSpecification(ix,iy,iz)"
                                                                                        [value]="'createOptions' | localize" />
                                                                                </div>
                                                                                <div class="col-md-2 text-right">
                                                                                    <input type="button"
                                                                                        class="btn btn-secondary"
                                                                                        (click)="addItemAddition(ix, iy, iz)"
                                                                                        [value]="'createAddOns' | localize" />
                                                                                </div>
                                                                            </div>

                                                                            <div class="row"
                                                                                formArrayName="SpecificationModels"
                                                                                class="pt-14">
                                                                                <div
                                                                                    *ngFor="let Ds of Z['controls'].SpecificationModels['controls']; let idds = index">
                                                                                    <div formGroupName="{{ idds }}"
                                                                                        class="SpecificationModels-card card"
                                                                                     >
                                                                                        <div class="row mb-1">
                                                                                            <div class="col-md-5">
                                                                                                <div>
                                                                                                    <label>{{
                                                                                                        Ds.value.specificationDescription
                                                                                                        }} -
                                                                                                        {{
                                                                                                        Ds.value.specificationDescriptionEnglish
                                                                                                        }}</label>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-md-3"
                                                                                                *ngIf="isAdmin">
                                                                                                <div
                                                                                                    class="input-group">
                                                                                                    <div
                                                                                                        class="input-group-append">
                                                                                                        <button
                                                                                                            class="btn btn-primary blue"
                                                                                                            (click)="openSelectSpecificationModal(ix, iy, iz, idds,idds)"
                                                                                                            type="button">
                                                                                                            <i
                                                                                                                class="fa fa-search"></i>
                                                                                                            {{ l("Pick")
                                                                                                            }}
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col mt-1 text-right"
                                                                                                *ngIf="isAdmin">
                                                                                                <button
                                                                                                    class="btn btn-danger btn-sm"
                                                                                                    (click)="deleteSpecification(ix, iy, iz, idds)">
                                                                                                    <i
                                                                                                        class="fa fa-trash p-0 font-12"></i>
                                                                                                </button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="row"
                                                                                formArrayName="additionsCategorysListModels"
                                                                                class="pt-14">
                                                                                <div
                                                                                    *ngFor="let D of Z['controls'].additionsCategorysListModels['controls']; let idd = index">
                                                                                    <div formGroupName="{{ idd }}"
                                                                                        class="additionsCategorysListModels-card card"
                                                                                        >
                                                                                        <div class="row mb-1">
                                                                                            <div class="col-md-5">
                                                                                                <div>
                                                                                                    <label>{{
                                                                                                        D.value.name }}
                                                                                                        - {{
                                                                                                        D.value.nameEnglish
                                                                                                        }}</label>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-md-3"
                                                                                                *ngIf="isAdmin">
                                                                                                <div
                                                                                                    class="input-group">
                                                                                                    <div
                                                                                                        class="input-group-append">
                                                                                                        <button
                                                                                                            class="btn btn-primary blue"
                                                                                                            (click)="openSelectAdditionsCategoryModal(ix, iy, iz, idd,ix)"
                                                                                                            type="button">
                                                                                                            <i
                                                                                                                class="fa fa-search"></i>
                                                                                                            {{ l("Pick")
                                                                                                            }}
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col mt-1 text-right"
                                                                                                *ngIf="isAdmin">
                                                                                                <button
                                                                                                    class="btn btn-danger btn-sm"
                                                                                                    (click)="deleteitemAddition(ix, iy, iz, idd)">
                                                                                                    <i
                                                                                                        class="fa fa-trash p-0 font-12"></i>
                                                                                                </button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <!-------------------------------------------------->
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!----------->
                                                                <hr />
                                                                <div class="row mt-1 mb-1" *ngIf="isAdmin">
                                                                    <div class="col-md-12 text-right">
                                                                        <input type="button" class="btn btn-secondary"
                                                                            (click)="addItem(ix, iy)"
                                                                            value="Add Item" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row" *ngIf="isAdmin">
                                                            <div class="col-md-12 text-right">
                                                                <input type="button" class="btn btn-secondary"
                                                                    (click)="addSubCategory(ix)"
                                                                    value="Add Sub category" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" *ngIf="isAdmin">
                                        <div class="col-md-12 text-right">
                                            <input type="button" class="btn btn-secondary" (click)="addCategory()"
                                                value="Add  category" />
                                        </div>
                                    </div>

                                    <div>
                                        <button [disabled]="saving" type="button" class="btn btn-primary"
                                            (click)="back()">{{l("previus")}}</button>
                                        <input type="button" class="btn btn-primary" (click)="addMenu()" [value]="'Save' | localize">
                                        <!-- [disabled]="!menuForm.valid" -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="!isMall">
                            <div formArrayName="category">
                                <!-- items card-->
                                <div class="row mt-3">
                                    <div formGroupName="{{ ix }}" class="row p-0"
                                        *ngFor="let X of menuForm['controls'].category['controls']; let ix=index">
                                        <div class="card-custom gutter-b m-0 card"
                                           >
                                            <div class="p-0 p-xxl-2 p-md-2 card-body">
                                                <div class="row mt-1">
                                                    <div class="col-6 p-0 mb-1" *ngIf="isAdmin">
                                                        <input [placeholder]="'categoryNameAr' |localize" required
                                                            [class.error]="submitted &&  X.controls.name.invalid"
                                                            class="form-control"
                                                            type="text" formControlName="name" />
                                                        <p class="text-danger"
                                                            *ngIf="submitted && X.controls.name.invalid">This field is
                                                            required</p>
                                                    </div>
                                                    <div class="col-6 p-0 mb-1" *ngIf="!isAdmin">
                                                        <input disabled
                                                        [placeholder]="'categoryNameAr' | localize"

                                                           class="form-control"
                                                            type="text" formControlName="name" />
                                                    </div>

                                                    <div class="col-6 p-0 mb-1" *ngIf="isAdmin">
                                                        <input
                                                        [placeholder]="'categoryNameEn' | localize"

                                                        required
                                                            [class.error]="submitted &&  X.controls.nameEnglish.invalid"
                                                           class="form-control"
                                                            type="text" formControlName="nameEnglish" />
                                                        <p class="text-danger"
                                                            *ngIf="submitted && X.controls.nameEnglish.invalid">This
                                                            field is
                                                            required</p>
                                                    </div>
                                                    <div class="col-6 p-0 mb-1" *ngIf="!isAdmin">
                                                        <input disabled                                                       
                                                          [placeholder]="'categoryNameEn' | localize"

                                                            class="form-control"
                                                            type="text" formControlName="nameEnglish" />
                                                    </div>

                                                    <div class="col mb-1 mt-1 text-right" *ngIf="isAdmin">
                                                        <button class="btn btn-danger btn-sm"
                                                            (click)="deleteCategoryItem(ix)">
                                                            <i class="fa fa-trash p-0 font-12"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-1 mb-1">

                                        </div>
                                        <div formArrayName="items" class="row">
                                            <div class="row">
                                                <div class="col-xxl-4 col-md-6 col-12"
                                                    *ngFor="let Y of X['controls'].items['controls']; let iy=index">
                                                    <span class="card-custom gutter-b items-card card"
                                                        formGroupName="{{ iy }}"
                                                       >
                                                        <div *ngIf="getImage(ix, 0, iy).length > 0"
                                                            class="bg-light-primary rounded-top text-center">
                                                            <img [src]="getImage(ix, 0, iy)" alt="Item Pic"
                                                                height="170" />
                                                        </div>
                                                        <div *ngIf="isAdmin" class="p-1 media">
                                                            <label>{{ l("Image") }} *</label>
                                                            <input required type="file" id="uplode"
                                                                [class.error]="submitted && Y.controls.imageUri.invalid"
                                                               class="form-control"
                                                                [ngStyle]="{ visibility: getImage(ix, 0, iy).length > 0 ? 'hidden' : 'visible' }"
                                                                (change)="onFileChange($event, ix, 0, iy)" />
                                                            <button *ngIf="getImage(ix, 0, iy).length > 0"
                                                                class="btn btn-primary-info w-100 btn-sm"
                                                                (click)="openFileUploder(ix, 0, iy)">
                                                                Replace
                                                            </button>

                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12 text-center">
                                                                <p class="text-danger"
                                                                    *ngIf="submitted && Y.controls.imageUri.invalid">
                                                                    This field is
                                                                    required</p>
                                                            </div>
                                                        </div>
                                                        <!-- <image-cropper
                                                            [imageChangedEvent]="imageChangedEvent"
                                                            [maintainAspectRatio]="true"
                                                            [aspectRatio]="4 / 4"
                                                            [resizeToWidth]="128"
                                                            (imageCropped)="imageCroppedFile($event)"
                                                        ></image-cropper> -->
                                                        <div *ngIf="!isAdmin" class="media">
                                                            <label>{{ l("image") }}</label>
                                                            <input disabled type="file" id="uplode"
                                                               class="form-control"
                                                                [ngStyle]="{ visibility: getImage(ix, 0, iy).length > 0 ? 'hidden' : 'visible' }"
                                                                (change)="onFileChange($event, ix, 0, iy)" />
                                                        </div>
                                                        <div class="card-body p-1">
                                                            <div class="row">
                                                                <ul ngbNav #nav="ngbNav" class="nav-tabs">
                                                                    <li ngbNavItem>
                                                                        <a ngbNavLink>Arabic</a>
                                                                        <ng-template ngbNavContent>
                                                                            <div class="col-12" *ngIf="isAdmin">
                                                                                <input 
                                                                                [placeholder]="'itemNameAr' | localize"

                                                                                    required
                                                                                    [class.error]="submitted && Y.controls.itemName.invalid"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemName" />
                                                                                <p class="text-danger"
                                                                                    *ngIf="submitted && Y.controls.itemName.invalid">
                                                                                    This field is
                                                                                    required</p>
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="!isAdmin">
                                                                                <input disabled
                                                                                [placeholder]="'itemNameAr' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemName" />
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="isAdmin">
                                                                                <textarea
                                                                                [placeholder]="'itemdescAr' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemDescription">
                                                                                    </textarea>
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="!isAdmin">
                                                                                <textarea disabled
                                                                                [placeholder]="'itemdescAr' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemDescription">
                                                                                    </textarea>
                                                                            </div>
                                                                        </ng-template>
                                                                    </li>
                                                                    <li ngbNavItem>
                                                                        <a ngbNavLink>English</a>
                                                                        <ng-template ngbNavContent>
                                                                            <div class="col-12 " *ngIf="isAdmin">
                                                                                <input
                                                                                [placeholder]="'itemNameEn' | localize"

                                                                                    required
                                                                                    [class.error]="submitted && Y.controls.itemNameEnglish.invalid"
                                                                                    class="form-control" type="text"
                                                                                    formControlName="itemNameEnglish" />
                                                                                <p class="text-danger"
                                                                                    *ngIf="submitted && Y.controls.itemNameEnglish.invalid">
                                                                                    This field is
                                                                                    required</p>
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="!isAdmin">
                                                                                <input disabled
                                                                                [placeholder]="'itemNameEn' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemNameEnglish" />
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="isAdmin">
                                                                                <textarea
                                                                                [placeholder]="'itemdescEn' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemDescriptionEnglish">
                                                                                    </textarea>
                                                                            </div>
                                                                            <div class="col-12 mt-2" *ngIf="!isAdmin">
                                                                                <textarea disabled
                                                                                [placeholder]="'itemdescEn' | localize"
                                                                                    class="form-control"
                                                                                    type="text"
                                                                                    formControlName="itemDescriptionEnglish">
                                                                                    </textarea>
                                                                            </div>
                                                                        </ng-template>
                                                                    </li>
                                                                </ul>
                                                                <div [ngbNavOutlet]="nav" class="mt-2"></div>

                                                                <div class="col-6 mt-2" *ngIf="isAdmin">
                                                                    <select
                                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                                        formControlName="priority">
                                                                        <option disabled>Priority</option>
                                                                        <option [value]="i"
                                                                            *ngFor="let index of  X['controls'].items['controls']; let i=index">
                                                                            {{i+1}}</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="!isAdmin">
                                                                    <select disabled
                                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                                        formControlName="priority">
                                                                        <option disabled>Priority</option>
                                                                        <option value="index.priority"
                                                                            *ngFor="let index of  X['controls'].items['controls']; let i=index">
                                                                            {{i+1}}</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="isAdmin">
                                                                    <input 
                                                                    [placeholder]="'Price' | localize"

                                                                    required
                                                                        [class.error]="submitted && Y.controls.price.invalid"
                                                                        class="form-control"
                                                                        type="number" formControlName="price" />
                                                                    <p class="text-danger"
                                                                        *ngIf="submitted && Y.controls.price.invalid">
                                                                        This field is
                                                                        required</p>
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="!isAdmin">
                                                                    <input disabled 
                                                                    [placeholder]="'Price' | localize"

                                                                    class="form-control"
                                                                    type="number" formControlName="price" />

                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="isAdmin">
                                                                    <input disabled                                                                                 [placeholder]="'itemNameAr' | localize"
                                                                    [placeholder]="'oldPrice'| localize"

                                                                        class="form-control"
                                                                        type="number" formControlName="oldPrice" />
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="!isAdmin">
                                                                    <input disabled [placeholder]="'oldPrice'| localize"
                                                                      class="form-control"
                                                                        type="number" formControlName="oldPrice" />
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="isAdmin">
                                                                    <input [placeholder]="'discount'| localize"
                                                                        class="form-control"
                                                                        type="number" formControlName="ingredients" />
                                                                </div>
                                                                <div class="col-6 mt-2" *ngIf="!isAdmin">
                                                                    <input disabled [placeholder]="'discount'| localize"
                                                                        class="form-control"
                                                                        type="number" formControlName="ingredients" />
                                                                </div>

                                                                <div class="col-6 mt-2 form-check form-switch switch">
                                                                    <input class="form-check-input" type="checkbox"
                                                                        formControlName="isInService" />
                                                                    <label for="isInService"> {{ l("isAvailable") }}</label>
                                                                </div>
                                                                <div class="col-12 mt-2 text-right" *ngIf="isAdmin">
                                                                    <button class="btn btn-danger btn-sm"
                                                                        (click)="deleteItem(ix, 0, iy)">
                                                                        <i class="fa fa-trash p-0 font-12"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2" *ngIf="isAdmin">
                                                                <div class="col-12 p-0">
                                                                    <input type="button" class="btn btn-secondary"
                                                                        (click)="addSpecification('0', ix, iy)"
                                                                        [value]="'createAddOns' | localize" />
                                                                    <input type="button" class="btn btn-secondary"
                                                                        (click)="addItemAddition('0', ix, iy)"
                                                                        [value]="'createOptions' | localize" />
                                                                </div>
                                                            </div>
                                                            <div class=" mt-2" formArrayName="SpecificationModels">
                                                                <span class="mb-1"
                                                                    *ngFor="let Ds of Y['controls'].SpecificationModels['controls']; let idds = index">
                                                                    <span formGroupName="{{ idds }}"
                                                                        class="SpecificationModels-card">
                                                                        <div class="row mb-1">
                                                                            <div class="col-4 p-0">
                                                                                <div>
                                                                                    <label style="    overflow: hidden;
                                                                                        width: 100px;
                                                                                        white-space: nowrap;
                                                                                        text-overflow: ellipsis;">{{
                                                                                        Ds.value.specificationDescription
                                                                                        }}
                                                                                    </label>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-6 p-0" *ngIf="isAdmin">
                                                                                <div class="input-group">
                                                                                    <div class="input-group-append">
                                                                                        <!-- <button
                                                                                                class="btn btn-sm btn-primary-info "
                                                                                                (click)="openSelectSpecificationModal(ix, 0, iy, idds)"
                                                                                            >
                                                                                                <i class="fa fa-search"></i> {{ l("Pick") }}
                                                                                            </button> -->
                                                                                        <label
                                                                                            *ngIf="Ds.value.isRequired">-Required</label>
                                                                                        <label
                                                                                            *ngIf="!Ds.value.isRequired">-UnRequired</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-2 p-0 text-right"
                                                                                *ngIf="isAdmin">
                                                                                <button class="btn btn-danger btn-sm"
                                                                                    (click)="deleteSpecification(ix, 0, iy, idds)">
                                                                                    <i
                                                                                        class="fa fa-trash p-0 font-12"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </span>
                                                                </span>
                                                            </div>
                                                            <div class="mt-1"
                                                                formArrayName="additionsCategorysListModels">
                                                                <span class="mb-1"
                                                                    *ngFor="let D of Y['controls'].additionsCategorysListModels['controls']; let idd = index">
                                                                    <span formGroupName="{{ idd }}"
                                                                        class="additionsCategorysListModels-card">
                                                                        <div class="row mb-1">
                                                                            <div class="col-6 p-0">
                                                                                <div>
                                                                                    <label style="    overflow: hidden;
                                                                                        width: 100px;
                                                                                        white-space: nowrap;
                                                                                        text-overflow: ellipsis;">{{
                                                                                        D.value.name }}</label>
                                                                                </div>
                                                                            </div>
                                                                            <!-- <div class="col-md-3">
                                                <label>Category Name </label>
                                                <input class="form-control" type="text" [value]="D.value.name" style="font-family: system-ui; direction: rtl;">
                                            </div>
                                            <div class="col-md-3">
                                                <label>Category Name English</label>
                                                <input class="form-control" type="text"  [value]="D.value.nameEnglish" style="font-family: system-ui; direction: rtl;">
                                            </div> -->

                                                                            <!-- <div class="col-md-2">
                                                <label  for="aantal">Additions Categorys</label>
                                                <select  id="additionsCategorysListModels{{idd}}" [(ngModel)]="D.value" name="additionsCategorysListModels{{idd}}" class="form-control"    formControlName="additionsCategorysListModels" style="font-family: system-ui; direction: rtl;"   required>
                                                <option [value]="D.value.id" [selected]="true">{{D.value.name}} - {{D.value.nameEnglish}}</option>
                                                <option *ngFor="let rTy of Y['controls'].additionsCategorysListModels['controls']"  
                                                    [value]="rTy.value.id"  >{{rTy.value.name}} - {{rTy.value.nameEnglish}}</option>
                                                  
                                               </select>
                                            </div> -->



                                                                            <div class="col-6 p-0 text-right"
                                                                                *ngIf="isAdmin">
                                                                                <button class="btn btn-danger btn-sm"
                                                                                    (click)="deleteitemAddition(ix, 0, iy, idd)">
                                                                                    <i
                                                                                        class="fa fa-trash p-0 font-12"></i>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </span>
                                                </div>


                                                <div class="col-xxl-4 col-md-6 col-12 m-auto" *ngIf="isAdmin">
                                                    <div class="col-12 mt-1 mb-1 text-center">
                                                        <button type="button" class="btn btn-primary-info"
                                                            (click)="addItem('0', ix)">
                                                            <i class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>

                                    </div>
                                    <div class="modal-footer mb-2">
                                        <button [disabled]="saving" type="button" class="btn btn-outline-primary-info"
                                            (click)="back()">{{l("previus")}}</button>
                                        <input type="button" class="btn btn-primary-info" (click)="addMenu()"
                                            [value]="'Save' | localize" />
                                        <!-- [disabled]="!menuForm.valid" -->
                                    </div>
                                </div>
                                <!-- end of items card-->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <specificationLookupTableModal #specificationLookupTableModal (modalSave)="UpdateSpecificationId()">
    </specificationLookupTableModal>
    <addOnsLookupTableModal #addOnsLookupTableModal (modalSave)="UpdateAdditionsCategoryId()"></addOnsLookupTableModal>

</div>