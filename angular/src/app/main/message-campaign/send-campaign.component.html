<div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper container-xxl p-0">
        <div class="content-body">
            <p-confirmDialog></p-confirmDialog>
            <div class="card flex justify-content-center">
                <p-dialog header="List Of Unsubscribed Numbers" [(visible)]="visible" [modal]="true" [style]="{ width: '20vw' }" [draggable]="false" [resizable]="false">
                    <div class="card">
                        <p-table [value]="groupById?.contacts" [tableStyle]="{ 'min-width': '10rem' }" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5, 10, 20]">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Phone Number</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr>
                                    <td>{{ product.phoneNumber }}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </p-dialog>
            </div>
            <div [ngClass]="theme != 'theme12' ? 'container' : ''">
                <div class="card-custom gutter-b card">
                    <div class="card-body">
                        <div class="d-flex flex-column flex-column-fluid">
                            <div
                                class="content-header row content-header row subheader subheader-transparent align-items-center d-flex flex-sm-nowrap flex-wrap justify-content-between"
                                [ngClass]="theme != 'theme12' ? 'container' : ''"
                            >
                                <div class="content-header-left col-md-9 col-12 mb-2">
                                    <div class="row breadcrumbs-top">
                                        <div class="col-12 d-flex">
                                            <div class="breadcrumb-wrapper d-flex">
                                                <ol class="breadcrumb">
                                                    <!-- <li class="breadcrumb-item cursor-pointer">
                                                        <a (click)="goToDashboard()">{{ l("home") }}</a>
                                                    </li> -->
                                                    <li class="breadcrumb-item cursor-pointer">
                                                        <a (click)="goToCampaign()" style="color: #009789">{{ l("campaign") }}</a>
                                                    </li>
                                                    <li class="breadcrumb-item" style="color: #009789">
                                                        <span>{{ l("sendCampaign") }}</span>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <form #templateForm="ngForm" (ngSubmit)="sendCampaign(templateForm)">
                                <section class="modern-horizontal-wizard">
                                    <div id="stepper3Campaign" class="bs-stepper wizard-modern modern-wizard-example">
                                        <div class="bs-stepper-header">
                                            <div class="step" data-target="#template-compaign-details">
                                                <button type="button" class="step-trigger">
                                                    <span *ngIf="!iconTemplateCheck" class="bs-stepper-box">
                                                        <i data-feather="file-text" class="font-medium-3"></i>
                                                    </span>
                                                    <span
                                                        *ngIf="iconTemplateCheck"
                                                        class="bs-stepper-box"
                                                        style="color: rgba(0, 151, 137, 1) !important; background-color: rgba(0, 151, 137, 0.1) !important"
                                                    >
                                                        <i data-feather="check-circle" size="16" class="font-medium-3"></i>
                                                    </span>
                                                    <span class="bs-stepper-label">
                                                        <span class="bs-stepper-title">{{ l("template") }}</span>
                                                        <span class="bs-stepper-subtitle">{{ l("selectyourtemplate") }}</span>
                                                    </span>
                                                </button>
                                            </div>

                                            <!-- filtetration Start to be added here  -->
                                            <div class="line">
                                                <i data-feather="chevron-right" class="font-medium-2"></i>
                                            </div>
                                            <div class="step" data-target="#personal-info-modern">
                                                <button type="button" class="step-trigger">
                                                    <span *ngIf="!iconFilterationCheck" class="bs-stepper-box">
                                                        <i data-feather="user" class="font-medium-3"></i>
                                                    </span>
                                                    <span
                                                        *ngIf="iconFilterationCheck"
                                                        class="bs-stepper-box"
                                                        style="color: rgba(0, 151, 137, 1) !important; background-color: rgba(0, 151, 137, 0.1) !important"
                                                    >
                                                        <i data-feather="check-circle" class="font-medium-3"></i>
                                                    </span>
                                                    <span class="bs-stepper-label">
                                                        <span class="bs-stepper-title">{{ l("filtration") }}</span>
                                                        <span class="bs-stepper-subtitle">{{ l("contactsresult") }}</span>
                                                    </span>
                                                </button>
                                            </div>

                                            <!-- filtetration End to be added here  -->

                                            <div class="line">
                                                <i data-feather="chevron-right" class="font-medium-2"></i>
                                            </div>
                                            <div class="step" data-target="#date-info-compaign">
                                                <button type="button" class="step-trigger">
                                                    <span *ngIf="!iconDateCheck" class="bs-stepper-box">
                                                        <i data-feather="calendar" class="font-medium-3"></i>
                                                    </span>
                                                    <span
                                                        *ngIf="iconDateCheck"
                                                        class="bs-stepper-box"
                                                        style="color: rgba(0, 151, 137, 1) !important; background-color: rgba(0, 151, 137, 0.1) !important"
                                                    >
                                                        <i data-feather="check-circle" class="font-medium-3"></i>
                                                    </span>

                                                    <span class="bs-stepper-label">
                                                        <span class="bs-stepper-title">{{ l("dateinfo") }}</span>
                                                        <span class="bs-stepper-subtitle">{{ l("enteryourDate") }}</span>
                                                    </span>
                                                </button>
                                            </div>
                                            <div class="line">
                                                <i data-feather="chevron-right" class="font-medium-2"></i>
                                            </div>
                                            <div class="step" data-target="#check-campign">
                                                <button type="button" class="step-trigger">
                                                    <span *ngIf="!iconSentCheck" class="bs-stepper-box">
                                                        <i data-feather="check-square" class="font-medium-3"></i>
                                                    </span>

                                                    <span
                                                        *ngIf="iconSentCheck"
                                                        class="bs-stepper-box"
                                                        style="color: rgba(0, 151, 137, 1) !important; background-color: rgba(0, 151, 137, 0.1) !important"
                                                    >
                                                        <i data-feather="check-circle" class="font-medium-3"></i>
                                                    </span>

                                                    <span class="bs-stepper-label">
                                                        <span class="bs-stepper-title">{{ l("check") }}</span>
                                                        <span class="bs-stepper-subtitle">{{ l("checkyourInfo") }}</span>
                                                    </span>
                                                </button>
                                            </div>
                                            <div class="step" data-target="#congrate-message">
                                                <button type="button" class="step-trigger d-none">
                                                    <span class="bs-stepper-box">
                                                        <i data-feather="check-square" class="font-medium-3"></i>
                                                    </span>
                                                    <span class="bs-stepper-label">
                                                        <span class="bs-stepper-title">{{ l("check") }}</span>
                                                        <span class="bs-stepper-subtitle">{{ l("checkyourInfo") }}</span>
                                                    </span>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="bs-stepper-content">
                                            <div id="template-compaign-details" class="content">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <div ngModelGroup="stepOneCampign" #stepOneCampignCtrl="ngModelGroup">
                                                            <div class="form-group col-12 col-md-6">
                                                                <label class="form-label" for="modern-language">{{ l("selectTemplate") }}</label>
                                                                <ng-select
                                                                    [items]="getItems()"
                                                                    [multiple]="false"
                                                                    [closeOnSelect]="true"
                                                                    [searchable]="false"
                                                                    (change)="getTemplateById($event)"
                                                                    bindLabel="name"
                                                                    required
                                                                    name="selectedTemplate"
                                                                    placeholder="Select"
                                                                    [(ngModel)]="newTemplateId"
                                                                    #selectedTemplateControl="ngModel"
                                                                >
                                                                    <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                                                        <span class="ng-value-label"> {{ item.name }}</span>
                                                                        <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                                                    </ng-template>
                                                                </ng-select>

                                                                <div *ngIf="stepOneNextBtn && templateForm.form.controls['stepOneCampign'].get('selectedTemplate')?.invalid">
                                                                    <div
                                                                        class="text-danger"
                                                                        *ngIf="templateForm.form.controls['stepOneCampign'].get('selectedTemplate')?.errors.required"
                                                                    >
                                                                        {{ l("ThisFieldIsRequired") }}
                                                                    </div>
                                                                </div>

                                                                <!-- <div *ngIf="stepOneNextBtn && selectedTemplateControl?.invalid">
                                                                <div class="text-danger" *ngIf="selectedTemplateControl?.errors.required">{{ l("ThisFieldIsRequired") }}</div>
                                                            </div> -->
                                                            </div>
                                                            <div class="form-group col-12 col-md-6">
                                                                <label class="form-label" for="modern-first-name">{{ l("title") }}</label>
                                                                <input
                                                                    type="text"
                                                                    id="modern-first-name"
                                                                    class="form-control"
                                                                    name="titleCampign"
                                                                    pattern="^(?!\s*$).+"
                                                                    ngModel
                                                                    required
                                                                    maxlength="25"
                                                                    placeholder="title"
                                                                    #titleCampign="ngModel"
                                                                />
                                                                <div *ngIf="stepOneNextBtn && titleCampign.invalid">
                                                                    <div class="text-danger" *ngIf="titleCampign.errors?.required">{{ l("ThisFieldIsRequired") }}</div>
                                                                    <div class="text-danger" *ngIf="titleCampign.errors?.pattern">{{ l("campignTitleCantHaveSpace") }}</div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group col-12 col-md-6">
                                                                <label class="form-label" for="modern-language">{{ l("selectGroup") }}</label>
                                                                <ng-select
                                                                    [items]="groups"
                                                                    [disabled]="groups.length === 0"
                                                                    bindLabel="groupName"
                                                                    [trackByFn]="trackByFn"
                                                                    (scrollToEnd)="onScroll()"
                                                                    [loading]="customerApiLoading"
                                                                    typeToSearchText="Please start typying "
                                                                    [typeahead]="customerApiInput$"
                                                                    name="selectedGroup"
                                                                    placeholder="Select Group"
                                                                    required
                                                                    (change)="handleSelectChange($event)"
                                                                    [(ngModel)]="newGroupId"
                                                                    #selectedGroupControl="ngModel"
                                                                >
                                                                    <ng-template ng-option-tmp let-item="item">
                                                                        <div class="d-flex">
                                                                            <b class="mr-1">
                                                                                {{ item.groupName }}
                                                                            </b>
                                                                            <span *ngIf="item.id != 'static'" class="mr-1" [ngStyle]="{ color: item.totalNumber === 0 ? 'red' : 'green' }">
                                                                                ({{ item.totalNumber }})
                                                                            </span>
                                                                        </div>
                                                                    </ng-template>
                                                                </ng-select>

                                                                <div *ngIf="stepOneNextBtn && selectedGroupControl.invalid">
                                                                    <div class="text-danger" *ngIf="selectedGroupControl.errors.required">{{ l("ThisFieldIsRequired") }}</div>
                                                                </div>
                                                            </div>
                                                            <div  *ngIf="templateById?.localTemplateId && VariableCountHeader>0 || ComponentHeader?.text" class="form-group col-12 col-md-6">
                                                                      <ng-container *ngFor="let part of dynamicTextPartsHeader; let i = index">
                                                                        <ng-container *ngIf="part.type == 'input';">
                                                                            <h3> header varible {{(part.index + 1)}}</h3>
                                                                          <label [for]="'var' + (part.index + 1)" class="body-text-exampl">{{(part.index + 1)}} {{ '{{' + customeexampleHeader[part.index] + '}}' }} *</label>
                                                                            <input class="form-control" id="template-teamInbox" name="template-teamInbox"
                                                                            [(ngModel)]="inputsHeaders[part.index].value" (ngModelChange)="updateTextHeader()"
                                                                            [placeholder]="'Start Typing...'"
                                                                            (keypress)="onKeyPress2($event , inputsHeaders[part.index].value)"
                                                                            (input)="CheckHeaderIfValid()"
                                                                            />
                                                                          <p class="text-danger" *ngIf=" inputsHeaders[part.index].value.length === 0">{{
                                                                            l("ThisFieldIsRequired") }}</p>
                                                                               <div
                                                                                class="text-danger"
                                                                                *ngIf="!headerValidVariable"
                                                                            >
                                                                            <span>{{ l("cannotHaveOnlySpace") }}</span>
                                                                            </div>
                                                                        </ng-container>
                                                                      </ng-container>
                                                            </div>
                                                            <!-- Commented by Yara -->
                                                            <!-- <div *ngIf="VariableCount > 0" class="form-group col-12 col-md-6">
                                                                <ng-container *ngFor="let part of dynamicTextParts; let i = index">
                                                                    <ng-container *ngIf="part.type === 'input'">
                                                                        <h3> Body varible {{(part.index + 1)}}</h3>
                                                                        <label [for]="'var' + (part.index + 1)"  class="body-text-exampl">{{ (part.index + 1)  }} {{ '{{' + customeexampleBody[part.index] + '}}' }} *</label>
                                                                        <input
                                                                            class="form-control"
                                                                            [id]="'var' + (part.index + 1)"
                                                                            [name]="'var' + (part.index + 1)"
                                                                            required
                                                                            [(ngModel)]="inputs[part.index].value"
                                                                            (ngModelChange)="updateText()"
                                                                            [placeholder]="part.content"
                                                                            maxlength="50"
                                                                            (keypress)="onKeyPress($event)"
                                                                            pattern="^(?!\s*$).+"
                                                                            required
                                                                        />
                                                                        <div
                                                                            *ngIf="
                                                                                stepOneNextBtn &&
                                                                                templateForm.form.controls['stepOneCampign'].get('var' + (part.index + 1))?.invalid
                                                                            "
                                                                        >
                                                                            <div
                                                                                class="text-danger"
                                                                                *ngIf="templateForm.form.controls['stepOneCampign'].get('var' + (part.index + 1))?.errors.required"
                                                                            >
                                                                                {{ l("ThisFieldIsRequired") }}
                                                                            </div>
                                                                            <div
                                                                                class="text-danger"
                                                                                *ngIf="templateForm.form.controls['stepOneCampign'].get('var' + (part.index + 1))?.errors.pattern"
                                                                            >
                                                                                {{ l("cannotHaveOnlySpace") }}
                                                                            </div>
                                                                        </div>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </div> -->

                                                    <div *ngIf="variableURL1" class="col-12 p-0 w-75 mt-1">
                                                        <h3>Button <span class="body-text-exampl">{{URLBtton1.text}}</span> URL variable</h3>
                                                        <label  *ngIf="category!='AUTHENTICATION'" for="URLvar1" class="body-text-exampl">
                                                            {{ buildURLButton1() }} {{ '1 {{ ' + urlExample1 + ' }}*' }}
                                                        </label>
                                                        <label  *ngIf="category=='AUTHENTICATION'" for="URLvar1" >
                                                            otp = <span class="body-text-exampl"> {{firstButtonURLVariabllesTemplate.varOne}}</span>
                                                        </label>
                                                        <input class="form-control"
                                                                id="URLvar1"
                                                                name="template-teamInbox"
                                                                [(ngModel)]="firstButtonURLVariabllesTemplate.varOne"
                                                                (input)="URLValidVarible1()"
                                                                placeholder="Start Typing..."
                                                                name="URLvar1" />
                                                        <!-- <p class="text-danger" *ngIf="!URL1isValid">
                                                            {{ l("ThisFieldIsRequired") }}
                                                        </p> -->
                                                        <p class="text-danger" *ngIf="!URL1isValid">
                                                            Write a valid URL
                                                        </p>
                                                      </div>
                                                  
                                                      <div *ngIf="variableURL2" class="col-12 p-0 w-75 mt-1">
                                                        <h3>Button <span class="body-text-exampl">{{URLBtton2.text}}</span> URL variable</h3>
                                                        <label for="URLvar2" class="body-text-exampl">
                                                            {{ buildURLButton2() }} {{ '1 {{ ' + urlExample2 + ' }}*' }}
                                                        </label>
                                                        <input class="form-control"
                                                                id="URLvar2"
                                                                name="template-teamInbox"
                                                                [(ngModel)]="secondButtonURLVariabllesTemplate.varOne"
                                                                (input)="URLValidVarible2()"
                                                                placeholder="Start Typing..."
                                                                name="URLvar2" />
                                                        <!-- <p class="text-danger" *ngIf=" secondButtonURLVariabllesTemplate.varOne.length === 0">
                                                            {{ l("ThisFieldIsRequired") }}
                                                        </p> -->
                                                        <p class="text-danger" *ngIf="!URL2isValid">
                                                            Write a valid URL
                                                        </p>
                                                      </div>

                                                      <div *ngIf="copyCodeEsxist" class="col-12  p-0 w-75 mt-1">
                                                            <h3>Button <span class="body-text-exampl">{{copyCodeButton.text}}</span> Copy Code varible </h3>
                                                            <label for="'CopyCodeeVariablles'" class="body-text-exampl">{{buildCopyCodeButton()}} {{ '1 {{ ' + copyCodeButton.example[0] + ' }}*' }}</label>
                                                            <input class="form-control" id="template-teamInbox" name="template-teamInbox"
                                                                [(ngModel)]="buttonCopyCodeVariabllesTemplate.varOne" 
                                                                [placeholder]="'Start Typing...'"
                                                                name="CopyCodeeVariablles"
                                                                 maxlength="15"
                                                              />
                                                              <p class="text-danger" *ngIf="!CopyCodeisValid">{{
                                                              l("ThisFieldIsRequired") }}</p>
                                                        </div>
    

                                                    <div *ngIf="componentCarousel?.type=='carousel'">
                                                        <div class="carousel-container">
                                                            <div class="carousel-nav" *ngIf="VariableCountCarousel[currentCardIndex] > 0||(( urlVariables[currentCardIndex]?.[0])||(urlVariables[currentCardIndex]?.[1]))">
                                                                <button *ngFor="let card of cards; let i = index" 
                                                                        (click)="currentCardIndex = i"
                                                                        [class.active]="currentCardIndex === i">
                                                                    Card {{i + 1}}
                                                                </button>
                                                            </div>
                                                            <div class="current-card" *ngIf="cards[currentCardIndex]">
                                                                <div *ngIf="VariableCountCarousel[currentCardIndex] > 0">
                                                                    <div *ngFor="let input of inputsCarousel[currentCardIndex]; let i = index">
                                                                            <label>Card Body Variable  {{i + 1}}:</label>
                                                                            <input [(ngModel)]="input.value" 
                                                                                    (input)="updateCarouselText(currentCardIndex)"
                                                                                    placeholder="Enter value for {{i + 1}}"
                                                                                    [name]="'inputsCarousel_' + currentCardIndex + '_' + i"
                                                                                    >
                                                                    </div>
                                                                    <div class="preview" >
                                                                            Preview: {{displayCarouselTexts[currentCardIndex]}}
                                                                    </div>
                                                                  </div>
                                                              </div>
                                                        <div   class="current-card" >
                                                            <div *ngFor="let button of cards[currentCardIndex].components[2]?.buttons | slice:0:2; let buttonIndex = index" 
                                                                    [class.url-button]="button.type === 'URL'">

                                                                    <!-- <button (click)="test22()">trst</button> -->
                                                              <div *ngIf="button.type === 'URL' && urlVariables[currentCardIndex]?.[buttonIndex]"
                                                                    class="url-variables">
                                                                <span class="button-text">
                                                                {{ updateUrlWithVariables(currentCardIndex, buttonIndex, button.url) }}
                                                            </span>
                                                                <div *ngFor="let input of urlVariables[currentCardIndex][buttonIndex]; let i = index">
                                                                    <label>URL Variable {{i + 1}}:</label>
                                                                    <input   
                                                                            [(ngModel)]="input.value" 
                                                                            name="urlVar{{currentCardIndex}}{{buttonIndex}}{{i}}" 
                                                                            required 
                                                                            #inputRef="ngModel"
                                                                            [class.invalid]="inputRef.invalid && inputRef.touched"
                                                                            (input)="updateUrlWithVariables(currentCardIndex, buttonIndex, button.url)"
                                                                            placeholder="Enter value for {{i + 1}}">
                                                                    <div *ngIf="inputRef.invalid && inputRef.touched" class="error-message" style="color:red">
                                                                        This field is required.
                                                                    </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                                    </div>
                                               
                                                        </div>
                                                        <div>
                                                            <div class="d-flex justify-content-between">
                                                                <button
                                                                    class="btn btn-primary-info my-2 mr-1 btn-next w-75"
                                                                    type="button"
                                                                    [buttonBusy]="nextBtnClicked"
                                                                    (click)="modernHorizontalNext(1)"
                                                                    rippleEffect
                                                                >
                                                                    <span class="align-middle d-sm-inline-block d-none">Next</span>
                                                                    <i data-feather="arrow-right" class="align-middle ml-0"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-12 col-md-6">
                                                        <div class="f-flex flex-column templateContainer">
                                                            <h4 *ngIf="!templateById?.localTemplateId" class="font-cusotmize">{{ l("previewTempleteselect") }}</h4>
                                                            <h4 *ngIf="templateById?.localTemplateId" class="font-cusotmize">{{ l("previewTemplete") }}</h4>

                                                            <div
                                                                class="m-auto templateCard w-75"
                                                                [ngStyle]="{
                                                                    'border-color': templateById.localTemplateId ? '#d8d6de' : 'transparent',
                                                                    'background-color': templateById.localTemplateId ? 'white' : 'transparent'
                                                                }"
                                                                [style.transform]="'scale(' + zoomLevel + ')'"
                                                            >
                                                                <div
                                                                    class="card-template p-1"
                                                                    [ngStyle]="{
                                                                        'border-color': templateById.localTemplateId ? '#d8d6de' : 'transparent',
                                                                        'background-color': templateById.localTemplateId ? 'white' : 'transparent'
                                                                    }"
                                                                >
                                                                    <div class="row mb-1" *ngIf="VariableCountHeader === 0 || ComponentHeader?.text">
                                                                        <h4 [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                            {{ ComponentHeader?.text }}
                                                                        </h4>
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="imageFlag">
                                                                        <img
                                                                            class="p-0"
                                                                            *ngIf="templateById?.localTemplateId"
                                                                            src="{{ templateById.mediaLink }}"
                                                                            style="height: 150px"
                                                                            alt="Campaign Image"
                                                                        />
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="videoFlag">
                                                                        <iframe class="p-0" [src]="templateById.mediaLink | custom" frameborder="0"></iframe>
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="documentFlag">
                                                                        <iframe class="p-0" [src]="templateById.mediaLink | custom" style="height: 150px" frameborder="0"></iframe>
                                                                    </div>
                                                                                     
                                                                        <div class="row body-text-container">
                                                                      <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                          <ng-container *ngFor="let item of dynamicTextPartsHeader; let i = index">
                                                                              <span *ngIf="item.type == 'text'">
                                                                                  {{ item.content }}
                                                                              </span>
                                                                              <h3 *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                  {{checkPattern(item.content) ? '{{' + customeexampleHeader[item.index] +'}}' : item.content }}
                                                                              </h3>
                                                                          </ng-container>
                                                                      </div>
                                                                    </div>
                                                                    <div class="row body-text-container" *ngIf="!(componentCarousel?.type=='carousel')">
                                                                        <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                            <ng-container *ngFor="let item of dynamicTextParts; let i = index" >
                                                                                <span *ngIf="item.type == 'text'">
                                                                                    {{ item.content }}
                                                                                </span> 
                                                                                <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{ item.content }}
                                                                                </span>
                                                                                <!-- <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{checkPattern(item.content) ? '{{' + customeexampleBody[item.index] +'}}' : item.content }}
                                                                                </span> -->
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                

                                                      
                                                                    <div class="card-footer footerCard p-1 pt-0" *ngIf="ComponentFooter?.text">
                                                                        <small [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                            {{ ComponentFooter.text }}
                                                                        </small>
                                                                    </div>
                                                                </div>
                                                                <div class="row buttonText w-100" *ngIf="ComponentButton?.type == 'BUTTONS'">
                                                                  <div class="w-50 p-1" *ngFor="let button of ComponentButton.buttons; let i = index">
                                                                    <button
                                                                        class="btn w-100 btn-outline-secondary btn w-100 btn-outline-secondary btn-outline-primary-info"
                                                                    >
                                                                        {{ button.text }}
                                                                    </button>
                                                                    </div>
                                                                </div>

                                                        <div class="whatsapp-carousel-container" *ngIf="componentCarousel?.type=='carousel'">
                                                            <div class="wa-carousel-body" *ngIf="ComponentBody?.type=='BODY'">
                                                                <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                    <ng-container *ngFor="let item of dynamicTextParts; let i = index">
                                                                        <span *ngIf="item.type == 'text'">
                                                                            {{ item.content }}
                                                                        </span>
                                                                        <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                            {{checkPattern(item.content) ? '{{' + customeexampleBody[item.index] +'}}' : item.content }}
                                                                        </span>
                                                                    </ng-container>
                                                                </div>
                                                            </div>

                                                            <div class="wa-cards-scroller">
                                                                <div class="wa-cards-wrapper">
                                                                      <div class="wa-card" *ngFor="let card of componentCarousel.cards">
                                                                        <div class="wa-card-media">
                                                                          <div *ngIf="card.components[0]?.format === 'IMAGE'">
                                                                            <img class="wa-card-image" 
                                                                                    [src]="card.components[0]?.example.mediaCard[0]" 
                                                                                    alt="Card image" />
                                                                            </div>
                                                                            <div *ngIf="card.components[0]?.format === 'VIDEO'">
                                                                                <video class="wa-card-video" 
                                                                                    [src]="card.components[0]?.example.mediaCard[0]" 
                                                                                    controls></video>
                                                                            </div>
                                                                        </div>

                                                                        <div class="wa-card-content">
                                                                          <div class="wa-card-text" *ngIf="card.components[1]?.text">
                                                                            {{ card.components[1].text }}
                                                                        </div>

                                                                        <div class="wa-card-buttons">
                                                                            <div *ngFor="let button of card.components[2]?.buttons | slice:0:2" 
                                                                                    class="wa-card-button"
                                                                                    [class.url-button]="button.type === 'URL'"
                                                                                    [class.phone-button]="button.type === 'PHONE_NUMBER'"
                                                                                    [class.quick-reply]="button.type === 'QUICK_REPLY'">
                                                                                <span class="button-icon">
                                                                                <img *ngIf="button.type === 'URL'" src="assets/common/images/imageFacebookTemplate/Icon/external-link1.png" alt="Link">
                                                                                <img *ngIf="button.type === 'PHONE_NUMBER'" src="assets/common/images/imageFacebookTemplate/Icon/phone-receiver-silhouette1.png" alt="Call">
                                                                                <img *ngIf="button.type === 'QUICK_REPLY'" src="assets/common/images/imageFacebookTemplate/Icon/reply1.png" alt="Reply">
                                                                                </span>
                                                                                <span class="button-text">{{ button.text }}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                </div>
                                                                </div>
                                                            </div>


                                                            <div class="d-flex justify-content-center mt-3 zoom-container">
                                                                <i class="bi bi-zoom-in zooming-in mx-1" (click)="zoomIn()"></i>
                                                                <i class="bi bi-zoom-out zooming-out mx-1" (click)="zoomOut()"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="personal-info-modern" class="content">
                                                <div class="row">
                                                    <ngb-alert [dismissible]="false">
                                                        <div class="alert-body alert-remaining">
                                                            <span [data-feather]="'info'" [class]="'mr-50 align-middle mx-1'"></span>
                                                            <span>
                                                                <strong>{{ l("remainingMessageAllowed") }}</strong
                                                                >: {{ dailyLimit }} / {{ countallowedperday }}
                                                            </span>
                                                        </div>
                                                    </ngb-alert>

                                                    <!-- <ngb-alert [dismissible]="false">
                                                        <div class="alert-body alert-warning">
                                                            <span [data-feather]="'info'" [class]="'mr-50 align-middle mx-1'"></span>
                                                            <span>
                                                                <strong> We will send you an advertising campaign {{totalaccepted | numberAbbreviation}} in {{hour}} hour </strong>
                                                            </span>
                                                        </div>
                                                    </ngb-alert> -->

                                                    <!-- <ngb-alert [dismissible]="false">
                                                        <div class="alert-body alert-remaining">
                                                            <span [data-feather]="'info'" [class]="'mr-50 align-middle mx-1'"></span>
                                                            <span>
                                                                <strong>{{ l("totlaMessageAllowed") }}</strong
                                                                >: {{ countallowedperday }}
                                                            </span>
                                                        </div>
                                                    </ngb-alert> -->
                                                </div>

                                                <div class="row justify-content-center my-2">
                                                    <div class="filter-container-block mx-2" style="cursor: unset">
                                                        <div class="icon-container-block" style="background-color: #d1fffa">
                                                            <i class="bi bi-list-check" style="color: #009789"></i>
                                                        </div>
                                                        <h4>{{ totalaccepted | numberAbbreviation }}</h4>
                                                        <span>{{ l("acceptedContacts") }}</span>
                                                    </div>

                                                    <div
                                                        class="filter-container-block mx-2"
                                                        [ngClass]="{ 'curser-unset': this.groupById?.contacts.length === 0 }"
                                                        (click)="showDialog()"
                                                    >
                                                        <div class="icon-container-block" style="background-color: #fff6e6">
                                                            <i class="bi bi-envelope-dash" style="color: #fca004"></i>
                                                        </div>
                                                        <h4>{{ totalOptOut | numberAbbreviation }}</h4>
                                                        <span>{{ l("unsubscriber") }}</span>
                                                    </div>
                                                </div>
                                                <div class="w-100 d-flex justify-content-center">
                                                    <div class="d-flex col-6 justify-content-between">
                                                        <button class="btn btn-outline-primary-info btn-prev w-50" type="button" (click)="modernHorizontalPrevious()" rippleEffect>
                                                            <i data-feather="arrow-left" class="align-middle mr-0"></i>
                                                            <span class="align-middle d-sm-inline-block d-none">Back</span>
                                                        </button>
                                                        <button class="btn btn-primary-info btn-next w-50" type="button" (click)="modernHorizontalNext(2)" rippleEffect>
                                                            <span class="align-middle d-sm-inline-block d-none">Next</span>
                                                            <i data-feather="arrow-right" class="align-middle ml-0"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="date-info-compaign" class="content">
                                                <div class="d-flex justify-content-center" ngModelGroup="stepthreeCampign" #stepThreeCampignCtrl="ngModelGroup">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label" for="modern-language">{{ l("Whenwouldyouliketosendthecampaign") }}</label>
                                                        <div class="input-container">
                                                            <span
                                                                class="badge"
                                                                *ngIf="selectedDateInfoControl.value"
                                                                [ngStyle]="{
                                                                    'background-color': selectedDateInfoControl?.value === 1 ? '#28c76f1e' : '#ede9fe',
                                                                    color: selectedDateInfoControl?.value === 1 ? '#28c76f' : '#8b5cf6'
                                                                }"
                                                            >
                                                                {{ selectedDateInfoControl?.value === 1 ? "Send Now" : "Schedule" }}
                                                            </span>
                                                            <ng-select
                                                                [searchable]="false"
                                                                [items]="dateDropDownSetting"
                                                                name="selectedDateInfo"
                                                                placeholder="Select"
                                                                bindLabel="name"
                                                                bindValue="id"
                                                                required
                                                                ngModel
                                                                #selectedDateInfoControl="ngModel"
                                                            >
                                                                <ng-template ng-option-tmp let-item="item">
                                                                    <div class="d-flex align-items-baseline">
                                                                        <!-- <i class="icon-dropdown" data-feather="clock"></i> -->
                                                                        <b class="mr-1 custom-label-name" [style.color]="item.color" [style.background]="item.background">
                                                                            {{ item.name }}
                                                                        </b>
                                                                    </div>
                                                                </ng-template>
                                                            </ng-select>
                                                        </div>

                                                        <div style="margin-top: 10px">
                                                            <p style="font-size: 13px; font-weight: bold">{{ l("sendCampaignNote") }}</p>
                                                        </div>

                                                        <div *ngIf="stepThreeNextBtn && selectedDateInfoControl?.invalid">
                                                            <div class="text-danger" *ngIf="selectedDateInfoControl?.errors?.required">{{ l("ThisFieldIsRequired") }}</div>
                                                        </div>

                                                        <div class="form-group mt-2" *ngIf="selectedDateInfoControl?.value == 2">
                                                            <label class="form-label" for="modern-language">{{ l("selectDateToSend") }}</label>
                                                            <br />
                                                            <p-calendar
                                                                [iconDisplay]="'input'"
                                                                [showTime]="true"
                                                                [showIcon]="false"
                                                                [style]="{ width: '100%' }"
                                                                [inputStyle]="{ width: '100%' }"
                                                                name="dateAndTime"
                                                                [minDate]="minDate"
                                                                required
                                                                ngModel
                                                                #timeRef="ngModel"
                                                                class="btn-primary-info my-1"
                                                            ></p-calendar>

                                                            <div *ngIf="stepThreeNextBtn && timeRef.invalid">
                                                                <div class="text-danger" *ngIf="timeRef.errors.required">{{ l("ThisFieldIsRequired") }}</div>
                                                            </div>
                                                        </div>

                                                        <div class="d-flex justify-content-center my-2">
                                                            <button
                                                                class="btn btn-outline-primary-info w-50 btn-prev"
                                                                type="button"
                                                                (click)="modernHorizontalPrevious()"
                                                                rippleEffect
                                                            >
                                                                <i data-feather="arrow-left" class="align-middle mr-0"></i>
                                                                <span class="align-middle d-sm-inline-block d-none">Back</span>
                                                            </button>
                                                            <button
                                                                class="btn btn-primary-info w-50 btn-next"
                                                                type="button"
                                                                *ngIf="selectedDateInfo != '3'"
                                                                (click)="modernHorizontalNext(3)"
                                                                rippleEffect
                                                            >
                                                                <span class="align-middle d-sm-inline-block d-none">Next</span>
                                                                <i data-feather="arrow-right" class="align-middle ml-0"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="check-campign" class="content">
                                                <div class="d-flex justify-content-center">
                                                    <div class="col-12 col-md-6">
                                                        <div class="f-flex flex-column templateContainer">
                                                            <h4 *ngIf="templateById?.localTemplateId" class="font-cusotmize">Preview Templete</h4>

                                                            <div
                                                                class="m-auto templateCard w-75"
                                                                [ngStyle]="{
                                                                    'border-color': templateById?.localTemplateId ? '#d8d6de' : 'transparent',
                                                                    'background-color': templateById?.localTemplateId ? 'white' : 'transparent'
                                                                }"
                                                                [style.transform]="'scale(' + zoomLevel + ')'"
                                                            >
                                                                <div
                                                                    class="card-template p-1"
                                                                    [ngStyle]="{
                                                                        'border-color': templateById.localTemplateId ? '#d8d6de' : 'transparent',
                                                                        'background-color': templateById.localTemplateId ? 'white' : 'transparent'
                                                                    }"
                                                                    *ngIf="!(componentCarousel?.type=='carousel')"
                                                                >
                                                                  

                                                                
                                                                    <div class="row body-text-container" *ngIf="ComponentHeader?.text">
                                                                        <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                          <ng-container *ngFor="let item of dynamicTextPartsHeader; let i = index">
                                                                              <span *ngIf="item.type == 'text'">
                                                                                    {{ item.content }}
                                                                                </span>
                                                                              <!-- <h3 *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{checkPattern(item.content) ? '{{' + customeexampleHeader[item.index] +'}}' : item.content }}
                                                                                </h3> -->
                                                                                <h3 *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{ item.content }}
                                                                                </h3>
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="imageFlag ">
                                                                        <img
                                                                            class="p-0"
                                                                            *ngIf="templateById.localTemplateId"
                                                                            src="{{ templateById.mediaLink }}"
                                                                            style="height: 150px"
                                                                            alt="Campaign Image"
                                                                        />
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="videoFlag  &&templateById?.mediaLink">
                                                                        <iframe class="p-0" [src]="templateById?.mediaLink | custom" frameborder="0"></iframe>
                                                                    </div>
                                                                    <div class="row mb-1" *ngIf="documentFlag &&templateById?.mediaLink">
                                                                        <iframe class="p-0" [src]="templateById?.mediaLink | custom" style="height: 150px" frameborder="0"></iframe>
                                                                    </div>

                                                                    <div class="row body-text-container" *ngIf="!(componentCarousel?.type=='carousel')">
                                                                        <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                            <ng-container *ngFor="let item of dynamicTextParts; let i = index">
                                                                                <span *ngIf="item.type == 'text'">
                                                                                    {{ item.content }}
                                                                                </span>

                                                                                <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{ item.content }}
                                                                                </span>

                                                                                <!-- <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                                    {{checkPattern(item.content) ? '{{' + customeexampleBody[item.index] +'}}' : item.content }}
                                                                                </span> -->
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                    <div class="card-footer footerCard p-1 pt-0" *ngIf="ComponentFooter?.text">
                                                                        <small [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                            {{ ComponentFooter.text }}
                                                                        </small>
                                                                    </div>
                                                                    </div>
                                                                    <div class="row buttonText w-100" *ngIf="ComponentButton?.type == 'BUTTONS'">
                                                                      <div class="w-50 p-1" *ngFor="let button of ComponentButton.buttons; let i = index">
                                                                        <button
                                                                          class="btn w-100 btn-outline-secondary btn-outline-primary-info"
                                                                        >
                                                                          {{ button.text }}
                                                                        </button>
                                                                      </div>
                                                                    </div>


                                                                    <div class="whatsapp-carousel-container" *ngIf="componentCarousel?.type=='carousel'">
                                                            <div class="wa-carousel-body" *ngIf="ComponentBody?.type=='BODY'">
                                                                <div [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                                    <ng-container *ngFor="let item of dynamicTextParts; let i = index">
                                                                        <span *ngIf="item.type == 'text'">
                                                                            {{ item.content }}
                                                                        </span>
                                                                        <span *ngIf="item.type == 'input'" class="body-text-exampl">
                                                                            {{checkPattern(item.content) ? '{{' + customeexampleBody[item.index] +'}}' : item.content }}
                                                                        </span>
                                                                    </ng-container>
                                                                </div>
                                                            </div>

                                                            <div class="wa-cards-scroller">
                                                                <div class="wa-cards-wrapper">
                                                                      <div class="wa-card" *ngFor="let card of componentCarousel.cards">
                                                                        <div class="wa-card-media">
                                                                          <div *ngIf="card.components[0]?.format === 'IMAGE'">
                                                                            <img class="wa-card-image" 
                                                                                    [src]="card.components[0]?.example.mediaCard[0]" 
                                                                                    alt="Card image" />
                                                                            </div>
                                                                            <div *ngIf="card.components[0]?.format === 'VIDEO'">
                                                                                <video class="wa-card-video" 
                                                                                    [src]="card.components[0]?.example.mediaCard[0]" 
                                                                                    controls></video>
                                                                            </div>
                                                                        </div>

                                                                        <div class="wa-card-content">
                                                                          <div class="wa-card-text" *ngIf="card.components[1]?.text">
                                                                            {{ card.components[1].text }}
                                                                        </div>

                                                                        <div class="wa-card-buttons">
                                                                            <div *ngFor="let button of card.components[2]?.buttons | slice:0:2" 
                                                                                    class="wa-card-button"
                                                                                    [class.url-button]="button.type === 'URL'"
                                                                                    [class.phone-button]="button.type === 'PHONE_NUMBER'"
                                                                                    [class.quick-reply]="button.type === 'QUICK_REPLY'">
                                                                                <span class="button-icon">
                                                                                <img *ngIf="button.type === 'URL'" src="assets/common/images/imageFacebookTemplate/Icon/external-link1.png" alt="Link">
                                                                                <img *ngIf="button.type === 'PHONE_NUMBER'" src="assets/common/images/imageFacebookTemplate/Icon/phone-receiver-silhouette1.png" alt="Call">
                                                                                <img *ngIf="button.type === 'QUICK_REPLY'" src="assets/common/images/imageFacebookTemplate/Icon/reply1.png" alt="Reply">
                                                                                </span>
                                                                                <span class="button-text">{{ button.text }}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                </div>
                                                                    </div>





                                                            </div>














                                                            
                                                            <div class="d-flex justify-content-center mt-3 zoom-container">
                                                                <i class="bi bi-zoom-in zooming-in mx-1" (click)="zoomIn()"></i>
                                                                <i class="bi bi-zoom-out zooming-out mx-1" (click)="zoomOut()"></i>
                                                            </div>
                                                        </div>

                                                        <div class="d-flex my-3 justify-content-center">
                                                            <div class="col-10 d-flex flex-column align-items-center">
                                                                <div class="form-group col-12 col-md-6">
                                                                    <label class="form-label" for="modern-first-name">{{ l("templateName") }}</label>
                                                                    <input
                                                                        type="text"
                                                                        disabled
                                                                        style="background-color: transparent"
                                                                        class="form-control"
                                                                        [value]="selectedTemplateControl.value?.name"
                                                                    />
                                                                </div>

                                                                <div class="form-group col-12 col-md-6" *ngIf="titleCampign">
                                                                    <label class="form-label" for="modern-first-name">{{ l("title") }}</label>
                                                                    <input
                                                                        type="text"
                                                                        disabled
                                                                        style="background-color: transparent"
                                                                        class="form-control"
                                                                        [value]="titleCampign.value"
                                                                    />
                                                                </div>

                                                                <div class="form-group col-12 col-md-6" *ngIf="selectedDateInfoControl.value === 2">
                                                                    <label class="form-label" for="modern-first-name">Date To Start</label>
                                                                    <input
                                                                        type="text"
                                                                        disabled
                                                                        style="background-color: transparent"
                                                                        [value]="
                                                                            templateForm.form.controls['stepthreeCampign'].get('dateAndTime')?.value | date : 'yyyy-MM-dd HH:mm:ss'
                                                                        "
                                                                        class="form-control"
                                                                    />
                                                                </div>
                                                                <div class="form-group col-12 col-md-6">
                                                                    <label class="form-label" for="modern-first-name">{{ l("Time to Send") }}</label>
                                                                    <div class="input-container">
                                                                        <span
                                                                            class="badge"
                                                                            [ngStyle]="{
                                                                                'background-color': selectedDateInfoControl.value === 1 ? '#28c76f1e' : '#ede9fe',
                                                                                color: selectedDateInfoControl.value === 1 ? '#28c76f' : '#8b5cf6'
                                                                            }"
                                                                        >
                                                                            {{ selectedDateInfoControl.value === 1 ? "Send Now" : "Schedule" }}
                                                                        </span>
                                                                        <input
                                                                            type="text"
                                                                            id="modern-first-name-preview"
                                                                            class="form-control"
                                                                            class="form-control date-type-container"
                                                                            style="background-color: transparent"
                                                                            disabled
                                                                        />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group col-12 col-md-6">
                                                                    <label class="form-label" for="modern-first-name">Contact</label>
                                                                    <input
                                                                        type="text"
                                                                        disabled
                                                                        class="form-control"
                                                                        style="background-color: transparent"
                                                                        [value]="totalaccepted | numberAbbreviation"
                                                                    />
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div *ngIf="walletAmount$ | async as data" class="d-flex flex-column">
                                                            <div class="d-flex">
                                                                <span class="review-payment">{{ l("payment") }}</span>
                                                            </div>
                                                            <div class="d-flex justify-content-between mt-1">
                                                                <span>{{ l("walletbalance") }}</span>
                                                                <span style="color: red">{{ data.totalAmount.toFixed(3) }} $</span>
                                                            </div>
                                                            <div class="d-flex justify-content-between mt-1">
                                                                <span>Total Wallet Balance After Sending</span>
                                                                <span [ngStyle]="{ color: data.totalAmount - campignCost < 0 ? 'red' : 'rgba(0, 151, 137, 1)' }"
                                                                    >{{ (data.totalAmount - campignCost).toFixed(3) }} $</span
                                                                >
                                                            </div>
                                                            <div class="d-flex justify-content-between mt-1">
                                                                <span>{{ l("TotalCampaignCost") }}</span>
                                                                <span class="review-payment">{{ campignCost.toFixed(3) }} $</span>
                                                            </div>
                                                            <!-- <div>
                                                                <button (click)="test22()">testttt</button>
                                                                </div> -->
                                                        </div>

                                                        <div class="col-12 my-3">
                                                            <div class="d-flex justify-content-between">
                                                                <button
                                                                    class="btn btn-outline-primary-info btn-prev w-50"
                                                                    type="button"
                                                                    (click)="modernHorizontalPrevious()"
                                                                    rippleEffect
                                                                >
                                                                    <i data-feather="arrow-left" class="align-middle mr-0"></i>
                                                                    <span class="align-middle d-sm-inline-block d-none">{{ l("backtoEdit") }}</span>
                                                                </button>
                                                                <button class="btn btn-primary-info btn-submit w-50" [buttonBusy]="isCampignSending" rippleEffect>
                                                                    {{ l("submit") }}
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="congrate-message" class="content container thankPage">
                                                <div class="row w-100 justify-content-center">
                                                    <div class="col-12">
                                                        <div class="row justify-content-center">
                                                            <img class="img-congrate" src="../../../../../assets/images/congrat.png" alt="" />
                                                        </div>
                                                        <div
                                                            *ngIf="walletAmount$ | async as data"
                                                            class="d-flex flex-column justify-content-center align-items-center p-1 container-congrate"
                                                        >
                                                            <h1>{{ l("ThankYou") }}</h1>
                                                            <h3>
                                                                The remaining amount in your <span> wallet is {{ (data.totalAmount - campignCost).toFixed(2) }} SA </span> Also you
                                                                can check the campaign status on the campaigns page.
                                                            </h3>
                                                        </div>

                                                        <div class="row justify-content-center">
                                                            <div class="col-4 my-3">
                                                                <div class="d-flex justify-content-between">
                                                                    <button class="btn btn-outline-primary-info btn-prev w-50" (click)="goTowalletPage()">
                                                                        <span class="align-middle d-sm-inline-block d-none">{{ l("myWallet") }}</span>
                                                                    </button>
                                                                    <button class="btn btn-primary-info btn-submit w-50" type="button" (click)="goToCampignPage()">
                                                                        {{ l("goToCampign") }}
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </form>
                        </div>

                        <!-- <div *ngIf="theme != 'theme12'" class="row justify-content-start">
                                <div class="container">
                                    <div [ngClass]="
                                    TotalRemainingAdsConversation <= 100
                                        ? 'alert-box error'
                                        : TotalRemainingAdsConversation > 100 && TotalRemainingAdsConversation <= 500
                                        ? 'alert-box notice'
                                        : TotalRemainingAdsConversation < 500 && TotalRemainingAdsConversation < 1000
                                        ? 'alert-box warning'
                                        : TotalRemainingAdsConversation >= 1000
                                        ? 'alert-box success'
                                        : 'alert-box success'
                                ">
                                        <span>Note: </span>
                                        <p>Total Out-Bound Conversations ( Remaining ): {{
                                            Measurement.remainingBIConversation }}.</p>
                                        <p>Total Remaining Free conversations: {{ Measurement.remainingFreeConversation}}.</p>
                                        <p>Total = ({{ Measurement.totalRemainingBIConversation }}).</p>
                                    </div>
                                </div>
                            </div> -->
                        <!-- <div *ngIf="theme === 'theme12'" class="row p-1">
                                <div class="alert col-12 col-xxl-4 col-md-6 p-1" [ngClass]="
                                            Measurement.remainingBIConversation <= 100
                                            ? 'alert-danger'
                                            : Measurement.remainingBIConversation > 100 && Measurement.remainingBIConversation <= 500
                                            ? 'alert-info'
                                            : Measurement.remainingBIConversation < 500 && Measurement.remainingBIConversation < 1000
                                            ? 'alert-warning'
                                            : Measurement.remainingBIConversation >= 1000
                                            ? 'alert-success'
                                            : 'alert-success'
                                    ">
                                    <span> {{ l("note") }}</span>
                                    <p>{{ l("campaignNote") }} {{Measurement.remainingBIConversation }}.</p>
                                    <p>Total Remaining Free conversations: {{ Measurement.remainingFreeConversation }}.
                                    </p>
                                    <p>Total = ({{ Measurement.totalRemainingBIConversation }}).</p>
                                </div>
                            </div> -->

                        <!-- <div class="row container justify-content-between" *ngIf="!contactFlag && theme != 'theme12'">
                                <h2>
                                    <span>{{ l("createCampaign") }}</span>
                                </h2>

                                <div class="row">
                                    <div class="form-group customDiv">
                                        <label for="campaignTitle"> {{ l("title") }}*</label>
                                        <input
                                            id="campaignTitle"
                                            type="text"
                                            class="form-control"
                                            [(ngModel)]="campaign.title"
                                            name="campaignTitle"
                                            required
                                            [class.error]="submitted && campaignTitle.invalid"
                                            #campaignTitle="ngModel"
                                        />
                                        <p class="text-danger" *ngIf="submitted && campaignTitle.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>

                                    <div class="form-group customDiv">
                                        <label for="campaignLanguage"> {{ l("Language") }} *</label>
                                        <select
                                            class="form-control"
                                            id="campaignLanguage"
                                            name="campaignLanguage"
                                            [(ngModel)]="campaign.language"
                                            required
                                            [class.error]="submitted && language.invalid"
                                            #language="ngModel"
                                        >
                                            <option *ngFor="let l of languageEnum" [value]="l.id">{{ l.name }}</option>
                                        </select>
                                        <p class="text-danger" *ngIf="submitted && language.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>

                                    <div class="form-group customDiv">
                                        <label for="template"> {{ l("template") }} *</label>
                                        <select
                                            class="form-control"
                                            id="template"
                                            name="template"
                                            [(ngModel)]="campaign.templateId"
                                            required
                                            [class.error]="submitted && templates.invalid"
                                            #templates="ngModel"
                                        >
                                            <option *ngFor="let t of template" [value]="t.localTemplateId">{{ t.name }}</option>
                                        </select>
                                        <p class="text-danger" *ngIf="submitted && templates.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>
                                </div>
                            </div>
                            <button
                                *ngIf="!contactFlag && theme != 'theme12'"
                                type="button"
                                class="btn btn-secondary float-right mr-2"
                                (click)="createCampaign()"
                                [buttonBusy]="saving"
                            >
                                {{ l("next") }}
                            </button>
                            <div class="row p-2" *ngIf="!contactFlag && theme === 'theme12'">
                                <div class="divider divider-default">
                                    <div class="divider-text">{{ l("createCampaign") }}</div>
                                </div>

                                <div class="col-6 mb-1">
                                    <div class="form-group">
                                        <label for="campaignTitle"> {{ l("title") }} *</label>
                                        <input
                                            class="form-control"
                                            id="campaignTitle"
                                            type="text"
                                            [(ngModel)]="campaign.title"
                                            name="campaignTitle"
                                            required
                                            [class.error]="submitted && campaignTitle.invalid"
                                            #campaignTitle="ngModel"
                                        />
                                        <p class="text-danger" *ngIf="submitted && campaignTitle.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>
                                </div>

                                <div class="col-6 mb-1">
                                    <div class="form-group">
                                        <label for="campaignLanguage">{{ l("Language") }} *</label>
                                        <select
                                            [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                            id="campaignLanguage"
                                            name="campaignLanguage"
                                            [(ngModel)]="campaign.language"
                                            required
                                            [class.error]="submitted && language.invalid"
                                            #language="ngModel"
                                        >
                                            <option *ngFor="let l of languageEnum" [value]="l.id">{{ l.name }}</option>
                                        </select>
                                        <p class="text-danger" *ngIf="submitted && language.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>
                                </div>

                                <div class="col-6 mb-1">
                                    <div class="form-group">
                                        <label for="template">{{ l("template") }} *</label>
                                        <select
                                            [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                            id="template"
                                            name="template"
                                            [(ngModel)]="campaign.templateId"
                                            required
                                            [class.error]="submitted && templates.invalid"
                                            #templates="ngModel"
                                        >
                                            <option *ngFor="let t of template" [value]="t.localTemplateId">{{ t.name }}</option>
                                        </select>
                                        <p class="text-danger" *ngIf="submitted && templates.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6 text-right">
                                        <button
                                            *ngIf="theme != 'theme12'"
                                            type="button"
                                            class="btn btn-outline-primary mr-1"
                                            (click)="createCampaign()"
                                            [buttonBusy]="saving"
                                            [busyText]="l('SavingWithThreeDot')"
                                        >
                                            {{ l("next") }}
                                        </button>
                                        <button
                                            *ngIf="theme === 'theme12'"
                                            type="button"
                                            class="btn btn-outline-primary-info mr-1"
                                            (click)="createCampaign()"
                                            [buttonBusy]="saving"
                                            [busyText]="l('SavingWithThreeDot')"
                                        >
                                            {{ l("next") }}
                                        </button>
                                    </div>
                                </div>
                            </div> -->

                        <div class="col-sm-12 row container justify-content-end" *ngIf="contactFlag && theme != 'theme12'">
                            <div class="row">
                                <button class="btn btn-outline-primary-info m-0 m-xl-1" [disabled]="sendToGroupFlag" (click)="handleSendToGroup()">
                                    {{ l("sendToGroup") }}
                                </button>
                                <button type="button" class="btn btn-danger p-2" [disabled]="filterContactFlag" (click)="filterContact()">{{ l("sendToExisting") }}</button>
                                <button type="button" class="btn btn-danger p-2" [disabled]="externalContactFlag" (click)="externalContact($event)">
                                    {{ l("sendToExternal") }}
                                </button>
                            </div>
                        </div>
                        <!-- <div class="col-sm-12 row justify-content-end" *ngIf="contactFlag && theme === 'theme12'">
                            <div class="col-12 text-right d-flex d-xl-block d-md-block">
                                <button class="btn btn-outline-primary-info m-0 m-xl-1" [disabled]="sendToGroupFlag" (click)="handleSendToGroup()">
                                    {{ l("sendToGroup") }}
                                </button>
                                <button class="btn btn-outline-primary-info m-0 m-xl-1" [disabled]="filterContactFlag" (click)="filterContact()">
                                    {{ l("sendToExisting") }}
                                </button>

                                <button class="btn btn-outline-primary-info m-0 m-xl-1" [disabled]="externalContactFlag" (click)="externalContact($event)">
                                    {{ l("sendToExternal") }}
                                </button>
                            </div>
                        </div> -->

                        <div *ngIf="contactFlag && sendToGroupFlag && theme != 'theme12'">
                            <div class="row justify-content-between">
                                <h2>
                                    <span>{{ l("sendToGroup") }} </span>
                                </h2>
                                <app-sendtoCompaignToGroup [campaign]="campaign"></app-sendtoCompaignToGroup>
                            </div>
                        </div>

                        <!-- sendToGroupFlag-->
                        <!-- <div *ngIf="contactFlag && sendToGroupFlag && theme === 'theme12'">
                            <div class="row justify-content-between">
                                <div class="divider divider-default">
                                    <div class="divider-text">{{ l("sendToGroup") }}</div>
                                </div>
                                <app-sendtoCompaignToGroup [campaign]="campaign"></app-sendtoCompaignToGroup>
                            </div>
                        </div> -->

                        <div *ngIf="contactFlag && externalContactFlag && theme != 'theme12'">
                            <div class="row container justify-content-between" *ngIf="dailyLimit > 0">
                                <h2>
                                    <span> {{ l("externalContacts") }}</span>
                                </h2>

                                <div class="container-upload-file" appDnd (fileDropped)="onFileDropped($event); fileDropRef.value = null" appUpload>
                                    <input
                                        type="file"
                                        #fileDropRef
                                        id="fileDropRef"
                                        accept=".xlsx, .xls"
                                        (change)="fileBrowseHandler($event.target.files); fileDropRef.value = null"
                                    />
                                    <img src="../../../../../assets/images/ic-upload-file.svg" alt="" />
                                    <h3>{{ l("draganddrop") }}</h3>
                                    <h3>{{ l("browsForFileOR") }}</h3>
                                    <label for="fileDropRef">{{ l("browsForFile") }}</label>
                                    <div class="files-list">
                                        <div class="single-file" *ngIf="file">
                                            <img src="../../../../../assets/images/ic-file.svg" width="45px" alt="file" />
                                            <div class="info-file-upload">
                                                <h4 class="name">
                                                    {{ file.name }}
                                                </h4>
                                                <p class="size">
                                                    {{ formatBytes(file.size, 0.0) }}
                                                </p>
                                                <!-- <app-progress [progress]="file"></app-progress> -->
                                            </div>
                                            <!-- <img src="assets/img/dnd/ic-delete-file.svg" class="delete" width="20px" alt="file" (click)="deleteFile(i)"> -->
                                        </div>
                                    </div>
                                </div>

                                <!-- <div class="row d-block">
                                        <div class="customDiv" name="" role="form">
                                            <label for="file">{{l("chooseFile") }}</label>
                                            <input #file type="file" id="file" class="form-control" name="AttachmentId" accept=".xlsx"
                                                (change)="handleFileInput($event)" />
                                        </div>
                                        <div class="ml-3">
                                            <button (click)="uploadFileToActivity($event)" class="btn btn-primary"  >
                                                {{l("uploadFile") }}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div name="" role="form">
                                            <button class="btn btn-primary">
                                                <a href="https://infoseedstoragestg.blob.core.windows.net/4408da24-aad7-4802-a1f1-46f5ad9e2074/52bdc804-7c52-4f7d-8a2d-94f7f6a774b9.xlsx"
                                                    download="proposed_file_name" style="color: #fff">{{l("downloadSample") }}</a>
                                            </button>
                                        </div>
                                    </div> -->
                            </div>
                        </div>

                        <!-- <div *ngIf="contactFlag && externalContactFlag && theme === 'theme12'">
                            <div class="divider divider-default">
                                <div class="divider-text">{{ l("externalContacts") }}</div>
                            </div>
                            <div class="row p-0 p-xl-1">
                                <div class="col-12 col-xl-6 justify-content-between">
                                    <div class="row" *ngIf="dailyLimit > 0">
                                        <div class="container-upload-file" appDnd (fileDropped)="onFileDropped($event); fileDropRef.value = null" appUpload>
                                            <input
                                                type="file"
                                                #fileDropRef
                                                id="fileDropRef"
                                                accept=".xlsx, .xls"
                                                (change)="fileBrowseHandler($event.target.files); fileDropRef.value = null"
                                            />
                                            <img src="../../../../../assets/images/ic-upload-file.svg" alt="" />
                                            <h3>{{ l("draganddrop") }}</h3>
                                            <h3>{{ l("browsForFileOR") }}</h3>
                                            <label for="fileDropRef">{{ l("browsForFile") }}</label>
                                            <div class="files-list">
                                                <div class="single-file" *ngIf="file">
                                                    <img src="../../../../../assets/images/ic-file.svg" width="45px" alt="file" />
                                                    <div class="info-file-upload">
                                                        <h4 class="name">
                                                            {{ file.name }}
                                                        </h4>
                                                        <p class="size">
                                                            {{ formatBytes(file.size, 0.0) }}
                                                        </p>
                                                        <app-progress [progress]="file"></app-progress>
                                                    </div>
                                                    <img src="assets/img/dnd/ic-delete-file.svg" class="delete" width="20px" alt="file" (click)="deleteFile(i)">
                                                </div>
                                            </div>
                                        </div>
                                        <div role="form">
                                            <label for="file">{{l("chooseFile") }}</label>
                                            <input #file type="file" id="file"
                                            class="form-control"  
                                                id="campaignLanguage" 
                                                name="campaignLanguage" 
                                                name="AttachmentId"
                                                accept=".xlsx"
                                                (change)="handleFileInput($event)" />
                                        </div>
                                    </div>
                                    <div *ngIf="dailyLimit > 0" class="row mt-1">
                                        <div class="col-6">
                                            <button (click)="uploadFileToActivity($event)"
                                                class="btn btn-outline-primary-info mr-1">
                                                <i class="fa fa-plus"></i> {{l("uploadFile") }}
                                            </button>
                                        </div>
                                        <div class="col-6 text-right">
                                            <button class="btn btn-outline-primary-info">
                                                <a class="color-green"
                                                    href="https://infoseedstoragestg.blob.core.windows.net/4408da24-aad7-4802-a1f1-46f5ad9e2074/52bdc804-7c52-4f7d-8a2d-94f7f6a774b9.xlsx"
                                                    download="proposed_file_name">{{l("downloadSample") }}</a>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="item-features mt-4 pt-5">
                                        <div class="row text-center">
                                            <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                <div class="w-75 mx-auto">
                                                    <i class="fas fa-comment"></i>
                                                    <h4 class="mt-2 mb-1">{{l("totalOutBound") }}</h4>
                                                    <p class="card-text">   {{ TotalRemainingAdsConversation }}</p>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                <div class="w-75 mx-auto">
                                                    <i class="fa fa-address-book"></i>
                                                    <h4 class="mt-2 mb-1">{{ l("totalContactToSend") }}</h4>
                                                    <p class="card-text">{{ primengTableHelper.totalRecordsCount - totalOptOut }}</p>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                <div class="w-75 mx-auto">
                                                    <i class="fa fa-phone"></i>
                                                    <h4 class="mt-2 mb-1">{{ l("totalOptOut") }}</h4>
                                                    <p class="card-text">{{ totalOptOut }}</p>
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                <div class="w-75 mx-auto">
                                                    <i class="fas fa-comment"></i>
                                                    <h4 class="mt-2 mb-1">{{ l("templateName") }}</h4>
                                                    <p class="card-text">{{ templateById.name }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-5 mt-4">
                                        <h4 class="text-danger">{{ l("totlaMessageAllowed") }} : {{ countallowedperday }}</h4>
                                        <h4 class="text-danger">{{ l("remainingMessageAllowed") }}: {{ dailyLimit }}</h4>
                                    </div>
                                </div>
                                <div class="col-12 col-xl-6 p-1 p-xl-0 m-auto">
                                    <div class="col-6 m-auto templateCard p-3">
                                        <span class="arrow"
                                            ><svg viewBox="0 0 8 13" width="8" height="13" class="">
                                                <path opacity=".13" fill="#0000000" d="M1.533 3.568 8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z"></path>
                                                <path fill="currentColor" d="M1.533 2.568 8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z"></path>
                                            </svg>
                                        </span>
                                        <div class="card-template p-1">
                                            <div class="row mb-1" *ngIf="ComponentHeader.text">
                                                <h4 [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ ComponentHeader.text }}
                                                </h4>
                                            </div>
                                            <div class="row mb-1" *ngIf="imageFlag">
                                                <img class="p-0" src="{{ templateById.mediaLink }}" style="height: 150px" alt="Campaign Image" />
                                            </div>
                                            <div class="row mb-1" *ngIf="videoFlag">
                                                <iframe class="p-0" [src]="templateById.mediaLink | custom" frameborder="0"></iframe>
                                            </div>
                                            <div class="row mb-1" *ngIf="documentFlag">
                                                <iframe class="p-0" [src]="templateById.mediaLink | custom" style="height: 150px" frameborder="0"></iframe>
                                            </div>
                                            <div class="row">
                                                <span *ngIf="!externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ ComponentBody.text }}
                                                </span>
                                                <span *ngIf="externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ displayGlobal }}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="card-footer footerCard p-1 pt-0" *ngIf="ComponentFooter.text">
                                            <small [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                {{ ComponentFooter.text }}
                                            </small>
                                        </div>
                                        <div class="row buttonText" *ngIf="ComponentButton.buttons">
                                            <div class="col p-0" *ngFor="let button of ComponentButton.buttons">
                                                <button class="btn btn-light">
                                                    {{ button.text }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <div *ngIf="contactFlag && filterContactFlag && theme != 'theme12'">
                            <div class="row justify-content-between">
                                <h2>
                                    <span>{{ l("filterContacts") }} </span>
                                </h2>
                                <div class="row">
                                    <div class="form-group">
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-3 mb-2">
                                                    <label for="range-input">
                                                        <span class="font-size-h6 mr-4">{{ l("joiningDate") }}</span>
                                                        <span class="font-size-h6 mr-4">
                                                            <i (click)="initializeDateRange()" class="fas fa-undo"></i>
                                                        </span>
                                                        <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The first message sent by customer">
                                                            <i class="fas fa-info-circle"></i>
                                                        </span>
                                                        <input
                                                            type="text"
                                                            class="range-input"
                                                            id="range-input"
                                                            [(ngModel)]="dateRange"
                                                            [bsConfig]="dateRangePickerOptions"
                                                            bsDaterangepicker
                                                        />
                                                    </label>
                                                </div>
                                                <div class="col-3 mb-2">
                                                    <label for="countryCode" class="font-size-h6 mr-4">{{ l("countryCode") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="Each country has different card cost rate">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <ngx-intl-tel-input
                                                        class="d-contents"
                                                        id="countryCode"
                                                        [preferredCountries]="preferredCountries"
                                                        [enablePlaceholder]="false"
                                                        [enableAutoCountrySelect]="false"
                                                        [searchCountryFlag]="false"
                                                        [maxLength]="0"
                                                        [selectFirstCountry]="true"
                                                        [phoneValidation]="true"
                                                        [separateDialCode]="separateDialCode"
                                                        [numberFormat]="PhoneNumberFormat.National"
                                                        [(ngModel)]="countryObj"
                                                        (countryChange)="getCountryCode($event)"
                                                        required
                                                    >
                                                    </ngx-intl-tel-input>
                                                </div>
                                                <div class="col-3 mb-2">
                                                    <label class="font-size-h6 mr-4" for="city">{{ l("city") }}</label>
                                                    <!-- <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="Tooltip on top">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span> -->
                                                    <input id="city" name="city" type="text" class="form-control customInput" [(ngModel)]="contact.city" />
                                                </div>
                                                <div class="col-3 mb-2">
                                                    <label class="font-size-h6 mr-4" for="Phone">{{ l("customer") }}</label>
                                                    <!-- <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="Tooltip on top">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span> -->
                                                    <input id="Phone" name="Phone" type="text" class="form-control customInput" [(ngModel)]="contact.contactName" />
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="isHasPermissionOrder">
                                                    <label class="font-size-h6 mr-4" for="orderTimeFrom">{{ l("orderTimeFrom") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The orders that done in the period of time">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input
                                                        id="orderTimeFrom"
                                                        name="orderTimeFrom"
                                                        type="datetime-local"
                                                        class="form-control customInput"
                                                        [(ngModel)]="contact.orderTimeFrom"
                                                    />
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="isHasPermissionOrder">
                                                    <label class="font-size-h6 mr-4" for="orderTimeTo">{{ l("orderTimeTo") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The orders that done in the period of time">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input
                                                        id="orderTimeTo"
                                                        name="orderTimeTo"
                                                        type="datetime-local"
                                                        class="form-control customInput"
                                                        [(ngModel)]="contact.orderTimeTo"
                                                    />
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="isHasPermissionOrder">
                                                    <label class="font-size-h6 mr-4">{{ l("branchOrder") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="Branch which ordered from">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <select id="branch" name="branch" class="form-control" [(ngModel)]="contact.branch">
                                                        <option></option>
                                                        <option *ngFor="let asset3 of area" [value]="asset3.id">
                                                            {{ asset3.areaName }}
                                                        </option>
                                                    </select>
                                                </div>
                                                <!-- <div class="customDiv">
                                                    <label class="font-size-h6 mr-4" for="range-input">
                                                        <span class="font-size-h6 mr-4">Order Time</span>
                                                        <span class="font-size-h6 mr-4">
                                                            <i (click)="initializeDateRange()" class="fas fa-undo"></i>
                                                        </span>
                                                        <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="the order that done in the period of time">
                                                            <i class="fas fa-info-circle"></i>
                                                        </span>
                                                        <input
                                                            type="text"
                                                            placeholder="Select range"
                                                            class="range-input"
                                                            id="range-input"
                                                            placement="right"
                                                            [(ngModel)]="orderDateRange"
                                                            [bsConfig]="dateRangePickerOptions"
                                                            bsDaterangepicker
                                                        />
                                                    </label>                                                        
                                                </div> -->

                                                <div class="col-3 mb-2" *ngIf="isHasPermissionOrder">
                                                    <label class="font-size-h6 mr-4" for="totalOrderMin">{{ l("minOrders") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="Minimum total customer orders">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input
                                                        id="totalOrderMin"
                                                        name="totalOrderMin"
                                                        type="number"
                                                        class="form-control customInput"
                                                        min="0"
                                                        [(ngModel)]="contact.totalOrderMin"
                                                    />
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="isHasPermissionOrder">
                                                    <label class="font-size-h6 mr-4" for="totalOrderMax">{{ l("maxOrders") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="Maximum total customer orders">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input
                                                        id="totalOrderMax"
                                                        name="totalOrderMax"
                                                        type="number"
                                                        min="0"
                                                        class="form-control customInput"
                                                        [(ngModel)]="contact.totalOrderMax"
                                                    />
                                                </div>
                                                <div class="col-3 mb-2">
                                                    <label class="font-size-h6 mr-4" for="behavior">{{ l("customerBehavior") }} </label>
                                                    <span
                                                        class="font-size-h6 mr-4"
                                                        data-placement="top"
                                                        data-tooltip="OPT-In: customer decided to receive notification. 

                                                                        OPT-Out: customer decided NOT to receive notification. 

                                                                        Neutral: No Action Taken from the customer when he/she received the previous notification. 

                                                                        Note: sending to neutral might affect quality rating"
                                                    >
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <ng-multiselect-dropdown
                                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark ' : ''"
                                                        id="behavior"
                                                        [settings]="dropdownSettings"
                                                        [data]="dropdownList"
                                                        [(ngModel)]="selectedItems"
                                                        required
                                                        [class.error]="submitted && behavior.invalid"
                                                        #behavior="ngModel"
                                                    >
                                                    </ng-multiselect-dropdown>
                                                    <p class="text-danger" *ngIf="submitted && behavior.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="assetLevelOneFlag">
                                                    <label class="font-size-h6 mr-4">{{ l("interestedOf") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The most selected item by customer">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <select id="lvl1" (change)="onChangeLevelOne($event)" class="form-control" [(ngModel)]="contact.interestedOfOne">
                                                        <option></option>
                                                        <option *ngFor="let asset of assetLevelOne" [value]="asset.id">
                                                            {{ asset.levelOneNameAr }}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="assetLevelTwoFlag">
                                                    <label class="font-size-h6 mr-4">{{ l("interestedOf") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The most selected item in 2nd phase">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <select id="lvl2" (change)="onChangeLevelTwo($event)" class="form-control" [(ngModel)]="contact.interestedOfTwo">
                                                        <option *ngFor="let asset2 of assetLevelTwo" [value]="asset2.id">
                                                            {{ asset2.levelTwoNameAr }}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-3 mb-2" *ngIf="assetLevelThreeFlag">
                                                    <label class="font-size-h6 mr-4">{{ l("interestedOf") }}</label>
                                                    <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="The most selected item in 3rd phase">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <select id="lvl3" class="form-control" [(ngModel)]="contact.interestedOfThree">
                                                        <option *ngFor="let asset3 of assetLevelThree" [value]="asset3.id">
                                                            {{ asset3.levelThreeNameAr }}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <!-- <div class="row justify-content-between">
                                                <div class="customDiv">
                                                    <label class="font-size-h6 mr-4" for="totalSessions">Total Session</label>
                                                    <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="The Total Number of conversations done by customer">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input  id="totalSessions" name="totalSessions" type="number" class="form-control customInput" [(ngModel)]="contact.totalSessions">
                                                </div>   
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6 text-right"></div>
                                <div class="col-6 text-right">
                                    <button type="button" class="btn btn-primary" (click)="resetFilters()">
                                        <span>{{ l("Reset") }}</span>
                                    </button>
                                    <button type="button" class="btn btn-primary" (click)="filterContacts($event)">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- filter campaign theme 12-->
                        <div *ngIf="contactFlag && filterContactFlag && theme === 'theme12'">
                            <div class="row justify-content-between">
                                <div class="divider divider-default">
                                    <div class="divider-text">{{ l("filterContacts") }}</div>
                                </div>
                                <div class="row p-0 p-xl-1 m-0">
                                    <div class="col-12 col-xl-4 col-xxl-6">
                                        <div class="col-8 mb-1">
                                            <div class="form-group">
                                                <label
                                                    for="countryCode "
                                                    [ngbPopover]="'sendCampaignNumberNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    class="mr-4"
                                                    >{{ l("countryCode") }}</label
                                                >

                                                <ngx-intl-tel-input
                                                    [ngClass]="isArabic ? 'rtl' : ''"
                                                    class="d-contents"
                                                    id="countryCode"
                                                    [preferredCountries]="preferredCountries"
                                                    [enablePlaceholder]="false"
                                                    [enableAutoCountrySelect]="false"
                                                    [searchCountryFlag]="false"
                                                    [maxLength]="0"
                                                    [selectFirstCountry]="true"
                                                    [phoneValidation]="true"
                                                    [separateDialCode]="separateDialCode"
                                                    [numberFormat]="PhoneNumberFormat.National"
                                                    [(ngModel)]="countryObj"
                                                    (countryChange)="getCountryCode($event)"
                                                    required
                                                >
                                                </ngx-intl-tel-input>
                                            </div>
                                        </div>
                                        <div class="col-8 mb-1">
                                            <div class="form-group">
                                                <label class="mr-4" for="Phone">{{ l("customer") }}</label>
                                                <!-- <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="Tooltip on top">
                                                <i class="fas fa-info-circle"></i>
                                            </span> -->
                                                <input id="Phone" name="Phone" type="text" class="form-control" [(ngModel)]="contact.contactName" />
                                            </div>
                                        </div>
                                        <div class="col-8 mb-1">
                                            <div class="form-group">
                                                <label
                                                    for="range-input"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignDateNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                >
                                                    {{ l("joiningDate") }}
                                                </label>
                                                <span class="font-size-h6 mr-4">
                                                    <i (click)="initializeDateRange()" class="fas fa-undo"></i>
                                                </span>
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    id="range-input"
                                                    [(ngModel)]="dateRange"
                                                    placement="bottom left"
                                                    container=""
                                                    [bsConfig]="dateRangePickerOptions"
                                                    bsDaterangepicker
                                                />
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1">
                                            <div class="form-group">
                                                <label for="city">{{ l("city") }}:</label>
                                                <!-- <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="Tooltip on top">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span> -->
                                                <input id="city" name="city" type="text" class="form-control" [(ngModel)]="contact.city" />
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1" *ngIf="isHasPermissionOrder">
                                            <div class="form-group">
                                                <label
                                                    for="orderTimeFrom"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignFristOrderNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    >{{ l("orderTimeFrom") }}</label
                                                >

                                                <input id="orderTimeFrom" name="orderTimeFrom" type="datetime-local" class="form-control" [(ngModel)]="contact.orderTimeFrom" />
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1" *ngIf="isHasPermissionOrder">
                                            <div class="form-group">
                                                <label
                                                    for="orderTimeTo"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignFristOrderNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    >{{ l("orderTimeTo") }}</label
                                                >

                                                <input id="orderTimeTo" name="orderTimeTo" type="datetime-local" class="form-control" [(ngModel)]="contact.orderTimeTo" />
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1" *ngIf="isHasPermissionOrder">
                                            <div class="form-group">
                                                <label class="mr-4" [ngbPopover]="'sendCampaignOrderBranchNote' | localize" placement="top" triggers="mouseenter:mouseleave">{{
                                                    l("branchOrder")
                                                }}</label>

                                                <select
                                                    id="branch"
                                                    name="branch"
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                    [(ngModel)]="contact.branch"
                                                >
                                                    <option></option>
                                                    <option *ngFor="let asset3 of area" [value]="asset3.id">
                                                        {{ asset3.areaName }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- <div class="customDiv">
                                                    <label class="font-size-h6 mr-4" for="range-input">
                                                        <span class="font-size-h6 mr-4">Order Time</span>
                                                        <span class="font-size-h6 mr-4">
                                                            <i (click)="initializeDateRange()" class="fas fa-undo"></i>
                                                        </span>
                                                        <span class="font-size-h6 mr-4" data-placement="top" data-tooltip="the order that done in the period of time">
                                                            <i class="fas fa-info-circle"></i>
                                                        </span>
                                                        <input
                                                            type="text"
                                                            placeholder="Select range"
                                                            class="range-input"
                                                            id="range-input"
                                                            placement="right"
                                                            [(ngModel)]="orderDateRange"
                                                            [bsConfig]="dateRangePickerOptions"
                                                            bsDaterangepicker
                                                        />
                                                    </label>                                                        
                                                </div> -->

                                        <div class="col-8 mb-1" *ngIf="isHasPermissionOrder">
                                            <div class="form-group">
                                                <label
                                                    for="totalOrderMin"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignMinimumOrderhNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    >{{ l("minOrders") }}</label
                                                >

                                                <input id="totalOrderMin" name="totalOrderMin" type="number" class="form-control" min="0" [(ngModel)]="contact.totalOrderMin" />
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1" *ngIf="isHasPermissionOrder">
                                            <div class="form-group">
                                                <label
                                                    for="totalOrderMax"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignMaxOrderhNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    >{{ l("maxOrders") }}</label
                                                >

                                                <input id="totalOrderMax" name="totalOrderMax" type="number" min="0" class="form-control" [(ngModel)]="contact.totalOrderMax" />
                                            </div>
                                        </div>
                                        <div class="col-8 mb-1">
                                            <div class="form-group">
                                                <label
                                                    for="behavior"
                                                    class="mr-4"
                                                    [ngbPopover]="'sendCampaignOptInNote' | localize"
                                                    placement="top"
                                                    triggers="mouseenter:mouseleave"
                                                    >{{ l("customerBehavior") }}
                                                </label>

                                                <ng-multiselect-dropdown
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark ' : ''"
                                                    id="behavior"
                                                    [settings]="dropdownSettings"
                                                    [data]="dropdownList"
                                                    [(ngModel)]="selectedItems"
                                                    required
                                                    [class.error]="submitted && behavior.invalid"
                                                    #behavior="ngModel"
                                                >
                                                </ng-multiselect-dropdown>
                                                <p class="text-danger" *ngIf="submitted && behavior.invalid">{{ l("ThisFieldIsRequired") }}</p>
                                            </div>
                                        </div>

                                        <div class="col-8 mb-1" *ngIf="assetLevelOneFlag">
                                            <div class="form-group">
                                                <label class="mr-4" [ngbPopover]="'sendCampaignItemNote' | localize" placement="top" triggers="mouseenter:mouseleave">{{
                                                    l("interestedOf")
                                                }}</label>

                                                <select
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                    id="lvl1"
                                                    (change)="onChangeLevelOne($event)"
                                                    [(ngModel)]="contact.interestedOfOne"
                                                >
                                                    <option></option>
                                                    <option *ngFor="let asset of assetLevelOne" [value]="asset.id">
                                                        {{ asset.levelOneNameAr }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-8 mb-1" *ngIf="assetLevelTwoFlag">
                                            <div class="form-group">
                                                <label class="mr-4" [ngbPopover]="'sendCampaignSecondItemNote' | localize" placement="top" triggers="mouseenter:mouseleave">{{
                                                    l("interestedOf")
                                                }}</label>

                                                <select
                                                    id="lvl2"
                                                    (change)="onChangeLevelTwo($event)"
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                    [(ngModel)]="contact.interestedOfTwo"
                                                >
                                                    <option *ngFor="let asset2 of assetLevelTwo" [value]="asset2.id">
                                                        {{ asset2.levelTwoNameAr }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-8 mb-1" *ngIf="assetLevelThreeFlag">
                                            <div class="form-group">
                                                <label class="mr-4" [ngbPopover]="'sendCampaignThirdItemNote' | localize" placement="top" triggers="mouseenter:mouseleave">{{
                                                    l("interestedOf")
                                                }}</label>

                                                <select
                                                    id="lvl3"
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'form-control-dark ' : 'form-control'"
                                                    [(ngModel)]="contact.interestedOfThree"
                                                >
                                                    <option *ngFor="let asset3 of assetLevelThree" [value]="asset3.id">
                                                        {{ asset3.levelThreeNameAr }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- <div class="row justify-content-between">
                                                <div class="customDiv">
                                                    <label class="font-size-h6 mr-4" for="totalSessions">Total Session</label>
                                                    <span class="font-size-h6 mr-4"  data-placement="top" data-tooltip="The Total Number of conversations done by customer">
                                                        <i class="fas fa-info-circle"></i>
                                                    </span>
                                                    <input  id="totalSessions" name="totalSessions" type="number" class="form-control customInput" [(ngModel)]="contact.totalSessions">
                                                </div>   
                                            </div> -->
                                    </div>

                                    <div class="col-12 col-xl-8 col-xxl-6 p-1 p-xl-0 my-auto">
                                        <div class="row">
                                            <div class="col-12 col-sm-4 col-xl-4 my-auto templateCard p-3">
                                                <span class="arrow"
                                                    ><svg viewBox="0 0 8 13" width="8" height="13" class="">
                                                        <path opacity=".13" fill="#0000000" d="M1.533 3.568 8 12.193V1H2.812C1.042 1 .474 2.156 1.533 3.568z"></path>
                                                        <path fill="currentColor" d="M1.533 2.568 8 11.193V0H2.812C1.042 0 .474 1.156 1.533 2.568z"></path>
                                                    </svg>
                                                </span>
                                                <div class="card-template p-1">
                                                    <!-- <div class="row mb-1" *ngIf="ComponentHeader?.text">
                                                        <h4 [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                            {{ ComponentHeader?.text }}
                                                        </h4>
                                                    </div> -->
                                                    <div class="row mb-1" *ngIf="imageFlag">
                                                        <img class="p-0" src="{{ templateById.mediaLink }}" alt="Campaign Image" />
                                                    </div>
                                                    <div class="row mb-1" *ngIf="videoFlag">
                                                        <iframe class="p-0" [src]="templateById.mediaLink | custom" frameborder="0"></iframe>
                                                    </div>
                                                    <div class="row mb-1" *ngIf="documentFlag">
                                                        <iframe class="p-0" [src]="templateById.mediaLink | custom" frameborder="0"></iframe>
                                                    </div>
                                                    <div class="row">
                                                        <span *ngIf="!externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                            {{ ComponentBody.text }}
                                                        </span>
                                                        <span *ngIf="externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                            {{ displayGlobal }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="card-footer footerCard p-1 pt-0" *ngIf="ComponentFooter.text">
                                                    <small [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                        {{ ComponentFooter.text }}
                                                    </small>
                                                </div>
                                                <div class="row buttonText" *ngIf="ComponentButton?.type=='BUTTONS'">
                                                    <div class="col p-0" *ngFor="let button of ComponentButton.buttons">
                                                        <button class="btn btn-light">
                                                            {{ button.text }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>



                                            
                                       <div  *ngIf=" componentCarousel?.type=='carousel' && templateById?.localTemplateId && dynamicTextParts.length !==0" class="col-12  p-0 w-75 mt-1">
                                          <ng-container *ngFor="let part of dynamicTextParts; let i = index">
                                            <ng-container *ngIf="part.type == 'input';">
                                              <!-- <label for="template-teamInbox">Custome Field {{ '{{' + ((part.index) + 1) + '}}' }} *</label> -->
                                              <h3> body  varible {{(part.index + 1)}}</h3>
                                              <label [for]="'var' + (part.index + 1)" class="body-text-exampl">{{(part.index + 1)}} {{ '{{' + customeexampleBody[part.index] + '}}' }} *</label>
                                              <input class="form-control" id="template-teamInbox" name="template-teamInbox"
                                                [(ngModel)]="inputs[part.index].value" (ngModelChange)="updateText()"
                                                [placeholder]="'Start Typing...'"
                                                (keypress)="onKeyPress2($event , inputs[part.index].value)"
                                                />
                                              <p class="text-danger" *ngIf="  inputs[part.index].value.length === 0">{{
                                                l("ThisFieldIsRequired") }}</p>
                                            </ng-container>
                                          </ng-container>
                                        </div>
                             
                                      <div *ngIf="componentCarousel?.type=='carousel'">
                                          <div class="carousel-container">
                                              <!-- Navigation controls -->
                                              <div class="carousel-nav" *ngIf="VariableCountCarousel[currentCardIndex] > 0||(( urlVariables[currentCardIndex]?.[0])||(urlVariables[currentCardIndex]?.[1]))">
                                                  <button *ngFor="let card of cards; let i = index" 
                                                          (click)="currentCardIndex = i"
                                                          [class.active]="currentCardIndex === i">
                                                      Card {{i + 1}}
                                                  </button>
                                              </div>
                             
                                              <!-- Current card display -->
                                              <div class="current-card" *ngIf="cards[currentCardIndex]">
                             
                                                  <div *ngIf="VariableCountCarousel[currentCardIndex] > 0">
                                                      <div *ngFor="let input of inputsCarousel[currentCardIndex]; let i = index">
                                                            <label>Card Body Variable  {{i + 1}}:</label>
                                                            <input [(ngModel)]="input.value" 
                                                                    (input)="updateCarouselText(currentCardIndex)"
                                                                    placeholder="Enter value for {{i + 1}}">
                                                        </div>
                                                        <div class="preview" >
                                                            Preview: {{displayCarouselTexts[currentCardIndex]}}
                                                        </div>
                                                    </div>
                                                </div>
                             
                                              <div class="current-card" *ngFor="let card of componentCarousel.cards; let cardIndex = index">
                                                <div >
                                                <div *ngFor="let button of card.components[2]?.buttons | slice:0:2; let buttonIndex = index" 
                                                        [class.url-button]="button.type === 'URL'">
                                                  <!-- <span class="button-icon">
                                                    <img *ngIf="button.type === 'URL'" src="assets/common/images/imageFacebookTemplate/Icon/external-link1.png" alt="Link">
                                                  </span> -->
                                                
                                                  <div *ngIf="button.type === 'URL' && urlVariables[cardIndex]?.[buttonIndex]"
                                                        class="url-variables">
                                                    <span class="button-text">
                                                        {{ updateUrlWithVariables(cardIndex, buttonIndex, button.url) }}
                                                    </span>
                                                    <div *ngFor="let input of urlVariables[cardIndex][buttonIndex]; let i = index">
                                                        <label>URL Variable {{i + 1}}:</label>
                                                            <input   
                                                                    [(ngModel)]="input.value" 
                                                                    name="urlVar{{currentCardIndex}}{{buttonIndex}}{{i}}" 
                                                                    required 
                                                                    #inputRef="ngModel"
                                                                    [class.invalid]="inputRef.invalid && inputRef.touched"
                                                                    (input)="updateUrlWithVariables(currentCardIndex, buttonIndex, button.url)"
                                                                    placeholder="Enter value for {{i + 1}}">
                                                            <div *ngIf="inputRef.invalid && inputRef.touched" class="error-message">
                                                                This field is required.
                                                            </div>
                                                    
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                      </div>
                             
                             
                                            <!-- <div *ngIf="VariableCount > 0 && !(componentCarousel?.type=='carousel')" class="col-12 col-sm-3 col-xl-3 mx-1">
                                                <ng-container *ngFor="let part of dynamicTextParts; let i = index">
                                                    <ng-container *ngIf="part.type === 'input'">
                                                        <label for="template-teamInbox">Custome Field {{ '{{' + ((part.index) + 1) + '}}' }} *</label>

                                                        <input
                                                            class="form-control"
                                                            id="template-teamInbox"
                                                            name="template-teamInbox"
                                                            [(ngModel)]="inputs[part.index].value"
                                                            (ngModelChange)="updateText()"
                                                            [placeholder]="part.content"
                                                            (keypress)="onKeyPress($event)"
                                                        />
                                                        <p class="text-danger" *ngIf="updatebtn && inputs[part.index].value.length === 0">{{ l("ThisFieldIsRequired") }}</p>
                                                    </ng-container>
                                                </ng-container>
                                                <button
                                                    id="updatevar"
                                                    type="button"
                                                    class="btn btn-primary-info my-2 mr-1"
                                                    [buttonBusy]="updateVariablesFlag"
                                                    (click)="updateVariables()"
                                                    [disabled]="customers.length === 0"
                                                >
                                                    {{ l("updateVariables") }}
                                                </button>
                                            </div> -->
                                        </div>

                                        <div class="item-features mt-3">
                                            <div class="row text-center">
                                                <!-- <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                        <div class="w-75 mx-auto">
                                                            <i class="fas fa-comment"></i>
                                                            <h4 class="mt-2 mb-1">{{l("totalOutBound") }}</h4>
                                                            <p class="card-text">   {{ TotalRemainingAdsConversation }}</p>
                                                        </div>
                                                    </div> -->
                                                <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                    <div class="w-75 mx-auto">
                                                        <i class="fa fa-address-book"></i>
                                                        <h4 class="mt-2 mb-1">{{ l("totalContactToSend") }}</h4>
                                                        <p class="card-text">{{ primengTableHelper.totalRecordsCount - totalOptOut }}</p>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                    <div class="w-75 mx-auto">
                                                        <i class="fa fa-phone"></i>
                                                        <h4 class="mt-2 mb-1">{{ l("totalOptOut") }}</h4>
                                                        <p class="card-text">{{ totalOptOut }}</p>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-md-4 mb-1 mb-md-0">
                                                    <div class="w-75 mx-auto">
                                                        <i class="fas fa-comment"></i>
                                                        <h4 class="mt-2 mb-1">{{ l("templateName") }}</h4>
                                                        <p class="card-text">{{ templateById.name }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-1 p-xl-0 p-1">
                                        <div class="col-12 col-xl-6">
                                            <h4 class="text-danger">{{ l("totlaMessageAllowed") }} : {{ countallowedperday }}</h4>
                                            <h4 class="text-danger">{{ l("remainingMessageAllowed") }} : {{ dailyLimit }}</h4>
                                        </div>
                                        <div class="ol-12 col-xl-6 text-right">
                                            <button type="button" class="btn btn-outline-primary-info" (click)="resetFilters()">
                                                <span>{{ l("Reset") }}</span>
                                            </button>
                                            <button class="btn btn-primary-info mr-1" (click)="filterContacts($event)">
                                                {{ l("proceed") }}
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--End  filter campaign theme 12-->

                        <div *ngIf="!sendToGroupFlag && contactFlag && theme != 'theme12'">
                            <div class="row">
                                <h4 class="text-danger">{{ l("totlaMessageAllowed") }} : {{ countallowedperday }}</h4>
                                <h4 class="text-danger">{{ l("remainingMessageAllowed") }} : {{ dailyLimit }}</h4>
                                <h2>
                                    <span>{{ l("sendCampaign") }}</span>
                                </h2>
                                <div class="col-12 col-xl-6">
                                    <div class="row">
                                        <h1>- {{ l("template") }} : {{ templateById.name }}</h1>
                                    </div>

                                    <div class="row">
                                        <h1>- {{ l("campaign") }} : {{ campaign.title }}</h1>
                                    </div>

                                    <div class="row">
                                        <h1>- {{ l("totalContactToSend") }} : {{ primengTableHelper.totalRecordsCount - totalOptOut }}</h1>
                                    </div>

                                    <div class="row">
                                        <h1>- Total OPT-Out Contact : {{ totalOptOut }}</h1>
                                    </div>
                                </div>
                                <!-- <div class="col-12 col-xl-6 p-1 p-xl-0 m-auto">
                                    <div class="col-6 m-auto templateCard p-6">
                                        <div class="card-template p-3" *ngIf="!(componentCarousel?.type=='carousel')">
                                            <div class="row mb-1" *ngIf="ComponentHeader?.text">
                                                <h3 [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ ComponentHeader?.text }}
                                                </h3>
                                            </div>
                                            <div class="row mb-1" *ngIf="imageFlag">
                                                <img class="p-0 w-100" *ngIf="imageFlag" src="{{ templateById.mediaLink }}" style="height: 150px" alt="Campaign Image" />
                                            </div>
                                            <div class="row mb-1" *ngIf="videoFlag">
                                                <iframe class="p-0 w-100" [src]="templateById.mediaLink | custom" frameborder="0"></iframe>
                                            </div>
                                            <div class="row mb-1" *ngIf="documentFlag">
                                                <iframe class="p-0 w-100" [src]="templateById.mediaLink | custom" style="height: 150px" frameborder="0"></iframe>
                                            </div>
                                            <div class="row">
                                                <span *ngIf="!externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ ComponentBody.text }}
                                                </span>
                                                <span *ngIf="externalContactFlag" [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                    {{ displayGlobal }}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="card-footer footerCard p-1 pt-0" *ngIf="ComponentFooter?.text">
                                            <small [ngClass]="templateById.language === 'ar' ? 'rtl' : 'ltr'">
                                                {{ ComponentFooter.text }}
                                            </small>
                                        </div>
                                        <div class="row buttonText" *ngIf="ComponentButton?.type=='BUTTONS'">
                                            <div class="col p-0" *ngFor="let button of ComponentButton.buttons">
                                                <button class="btn btn-light">
                                                    {{ button.text }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                            </div>

                            <div class="row">
                                <div class="col-12 text-right mb-1">
                                    <button class="btn btn-primary">
                                        <a
                                            href="https://infoseedstoragestg.blob.core.windows.net/4408da24-aad7-4802-a1f1-46f5ad9e2074/52bdc804-7c52-4f7d-8a2d-94f7f6a774b9.xlsx"
                                            download="proposed_file_name"
                                            style="color: #fff"
                                            >{{ l("downloadSample") }}</a
                                        >
                                    </button>

                                    <button
                                        type="button"
                                        class="btn btn-outline-primary-info mr-1"
                                        *ngIf="dailyLimit > 0"
                                        (click)="goToSchedulePage()"
                                        [buttonBusy]="saving"
                                        [disabled]="
                                            totalContact === 0 ||
                                            totalContact > dailyLimit ||
                                            (filterContactFlag && VariableCount > 0 && !isVariablesValidFlag) ||
                                            (VariableCount == 0 && isVariablesValidFlag)
                                        "
                                    >
                                        {{ l("messageSchedualing") }}
                                    </button>
                                    <button
                                        id="btnSend"
                                        type="button"
                                        class="btn btn-primary"
                                        *ngIf="dailyLimit > 0"
                                        (click)="sendCampaign()"
                                        [buttonBusy]="saving"
                                        [disabled]="
                                            totalContact === 0 ||
                                            totalContact > dailyLimit ||
                                            (filterContactFlag && VariableCount > 0 && !isVariablesValidFlag) ||
                                            (VariableCount == 0 && isVariablesValidFlag)
                                        "
                                    >
                                        {{ l("sendNow") }}
                                    </button>
                                </div>
                                <div class="row">
                                    <button
                                        type="button"
                                        class="btn btn-secondary customBtn"
                                        data-bs-toggle="modal"
                                        data-bs-target="#quickAnswersModal"
                                        [buttonBusy]="saving"
                                        [disabled]="totalContact == 0"
                                    >
                                        Schedule
                                    </button>
                                </div>
                            </div>

                            <!-- <div class="primeng-datatable-container p-0" [busyIf]="primengTableHelper.isLoading">
                                    <p-table #dataTable
                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : 'light'"
                                        class="table-responsive" [value]="primengTableHelper.records"
                                        rows="{{ primengTableHelper.defaultRecordsCountPerPage }}" [paginator]="false"
                                        [scrollbarV]="true" [scrollbarH]="true" [scrollable]="true"
                                        cols="10" ScrollWidth="100%" 
                                        [resizableColumns]="primengTableHelper.resizableColumns">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th  pSortableColumn="contactName">
                                                    {{ l("customer") }}
                                                    <p-sortIcon field="contact.contactName"></p-sortIcon>
                                                </th>
                                                <th   pSortableColumn="phoneNumber">
                                                    {{ l("PhoneNumber") }}
                                                    <p-sortIcon field="contact.phoneNumber"></p-sortIcon>
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">

                                            <tr [style.color]="record.customerOPT == 1 ? 'red' :  '' ">
                                                <td >
                                                  
                                                    <span class="p-column-title"> </span>
                                                    {{ record.contactName }}
                                                </td>

                                                <td  >
                                                    <span class="p-column-title"> </span>
                                                    {{ record.phoneNumber }}
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                    <div class="primeng-no-data" *ngIf="totalContact == 0">
                                        {{ l("NoData") }}
                                    </div>
                                    <div class="primeng-paging-container">
                                        <p-paginator [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark' : ''" [rows]="primengTableHelper.defaultRecordsCountPerPage" #paginator
                                            (onPageChange)="PaginatorContacts($event)"
                                            [rows]="20"
                                            [totalRecords]="totalContact"
                                            [rowsPerPageOptions]="[10,20,30]">
                                        </p-paginator>
                                        <span class="total-records-count">
                                            {{ l("TotalRecordsCount", totalContact) }}
                                        </span>
                                    </div>
                                </div> -->
                        </div>
                        <div class="row" *ngIf="!sendToGroupFlag && contactFlag && theme === 'theme12'">
                            <div class="divider divider-default">
                                <div class="divider-text">{{ l("sendCampaign") }}</div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-6"></div>
                                <div class="col-6 text-right">
                                    <button *ngIf="externalContactFlag" class="btn btn-primary-info mr-1">
                                        <a
                                            href="https://infoseedstoragestg.blob.core.windows.net/4408da24-aad7-4802-a1f1-46f5ad9e2074/52bdc804-7c52-4f7d-8a2d-94f7f6a774b9.xlsx"
                                            download="proposed_file_name"
                                            style="color: #fff"
                                            >{{ l("downloadSample") }}</a
                                        >
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-outline-primary-info mr-1"
                                        *ngIf="dailyLimit > 0"
                                        (click)="goToSchedulePage()"
                                        [buttonBusy]="saving"
                                        [disabled]="
                                            totalContact === 0 ||
                                            totalContact > dailyLimit ||
                                            (filterContactFlag && VariableCount > 0 && !isVariablesValidFlag) ||
                                            (VariableCount == 0 && isVariablesValidFlag)
                                        "
                                    >
                                        {{ l("messageSchedualing") }}
                                    </button>
                                    <button
                                        id="btnSend"
                                        type="button"
                                        class="btn btn-primary-info mr-1"
                                        *ngIf="dailyLimit > 0"
                                        (click)="sendCampaign()"
                                        [buttonBusy]="saving"
                                        [disabled]="
                                            totalContact === 0 ||
                                            totalContact > dailyLimit ||
                                            (filterContactFlag && VariableCount > 0 && !isVariablesValidFlag) ||
                                            (VariableCount == 0 && isVariablesValidFlag)
                                        "
                                    >
                                        {{ l("sendNow") }}
                                    </button>
                                </div>
                            </div>
                            <!-- <div class="row">
                                    <button type="button" class="btn btn-secondary customBtn" data-bs-toggle="modal"  data-bs-target="#quickAnswersModal"
                                    [buttonBusy]="saving" 
                                    [disabled]="totalContact == 0">Schedule
                                    </button>
                                </div> -->

                            <div class="row" *ngIf="customers.length > 0">
                                <p-table
                                    class="w-100"
                                    [value]="customers"
                                    dataKey="phoneNumber"
                                    [selection]="selectedCustomers"
                                    (selectionChange)="onSelectionChange($event)"
                                    [paginator]="true"
                                    [rows]="10"
                                    [totalRecords]="totalContact"
                                    [loading]="loadingTable"
                                    [rowsPerPageOptions]="[10, 20, 50]"
                                    responsiveLayout="stack"
                                    [responsive]="true"
                                    currentPageReportTemplate="{totalContact}"
                                    [selectionPageOnly]="true"
                                    editMode="row"
                                >
                                    <ng-template pTemplate="caption">
                                        <ng-container *ngIf="selectedCustomers">
                                            {{ l("numberOfSelectedMembers") }}
                                            <span [ngStyle]="{ color: selectedCustomers?.length > dailyLimit ? 'red' : 'green' }">{{ selectedCustomers?.length }}</span>
                                        </ng-container>
                                    </ng-template>
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>
                                                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                                <!-- <span class="p-column-title mx-1">{{ l("deleteFromGroup") }}</span> -->
                                            </th>
                                            <th>{{ l("groupContactName") }}</th>
                                            <th>{{ l("PhoneNumber") }}</th>
                                            <ng-container *ngIf="isVariablesValidFlag">
                                                <ng-container *ngFor="let item of listofvar">
                                                    <th *ngIf="item === 'varOne'">{{ l("varOne") }}</th>
                                                    <th *ngIf="item === 'varTwo'">{{ l("varTwo") }}</th>
                                                    <th *ngIf="item === 'varThree'">{{ l("varThree") }}</th>
                                                    <th *ngIf="item === 'varFour'">{{ l("varFour") }}</th>
                                                    <th *ngIf="item === 'varFive'">{{ l("varFive") }}</th>
                                                </ng-container>
                                                <th style="width: 8rem"></th>
                                            </ng-container>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-customer let-editing="editing" let-ri="rowIndex">
                                        <tr [pEditableRow]="customer">
                                            <td>
                                                <p-tableCheckbox [value]="customer"></p-tableCheckbox>
                                                <!-- <span class="p-column-title"> {{ l("Select") }}</span> -->
                                            </td>

                                            <td>
                                                <span class="p-column-title">
                                                    {{ l("groupContactName") }}
                                                </span>
                                                {{ customer.contactName }}
                                            </td>

                                            <td pEditableColumn>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <input pInputText type="text" class="form-control" [(ngModel)]="customer.phoneNumber" required />
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{ customer.phoneNumber }}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>

                                            <!-- <td pEditableColumn>
                                            <span class="p-column-title">
                                              {{ l("PhoneNumber") }}
                                            </span>
                                            {{customer.phoneNumber}}
                                          </td>
                               -->
                                            <!-- EDiting Column  -->

                                            <ng-container *ngIf="isVariablesValidFlag">
                                                <td *ngFor="let item of listofvar" pEditableColumn>
                                                    <p-cellEditor>
                                                        <ng-template pTemplate="input">
                                                            <input pInputText type="text" class="form-control" [(ngModel)]="customer.templateVariables[item]" required />
                                                        </ng-template>
                                                        <ng-template pTemplate="output">
                                                            {{ customer.templateVariables[item] }}
                                                        </ng-template>
                                                    </p-cellEditor>
                                                </td>

                                                <td style="text-align: center">
                                                    <button
                                                        *ngIf="!editing"
                                                        pButton
                                                        pRipple
                                                        type="button"
                                                        pInitEditableRow
                                                        icon="pi pi-pencil"
                                                        style="color: #009789"
                                                        (click)="onRowEditInit(customer)"
                                                        class="p-button-rounded p-button-text"
                                                    ></button>
                                                    <button
                                                        *ngIf="editing"
                                                        pButton
                                                        pRipple
                                                        type="button"
                                                        pSaveEditableRow
                                                        icon="pi pi-check"
                                                        (click)="onRowEditSave(customer)"
                                                        class="p-button-rounded p-button-text p-button-success p-mr-2"
                                                    ></button>
                                                    <!-- <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                                                            (click)="onRowEditCancel(customer, ri)" class="p-button-rounded p-button-text p-button-danger"></button> -->
                                                </td>
                                            </ng-container>
                                        </tr>
                                    </ng-template>
                                </p-table>

                                <div class="primeng-no-data" *ngIf="totalContact == 0">
                                    {{ l("NoData") }}
                                </div>

                                <div *ngIf="totalContact !== 0" class="primeng-paging-container">
                                    <span class="total-records-count">
                                        {{ l("TotalRecordsCount", totalContact) }}
                                    </span>
                                </div>
                            </div>

                            <!-- <div  class="primeng-datatable-container p-0" [busyIf]="primengTableHelper.isLoading">
                                    <p-table #dataTable [value]="primengTableHelper.records"
                                        rows="{{ primengTableHelper.defaultRecordsCountPerPage }}" [paginator]="false"
                                        [scrollable]="true" ScrollWidth="100%"
                                        [responsive]="primengTableHelper.isResponsive"
                                        [resizableColumns]="primengTableHelper.resizableColumns">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"  pSortableColumn="contactName">
                                                    {{ l("customer") }}
                                                    <p-sortIcon field="contact.contactName"></p-sortIcon>
                                                </th>
                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''" pSortableColumn="phoneNumber">
                                                    {{ l("PhoneNumber") }}
                                                    <p-sortIcon field="contact.phoneNumber"></p-sortIcon>
                                                </th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                            <tr [style.color]="record.customerOPT == 1 ? 'red' :  '' ">
                                                <td [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''" >
                                                    <span class="p-column-title"> {{ l("Contact Name") }}</span>
                                                    {{ record.contactName }}
                                                </td>

                                                <td [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''" >
                                                    <span class="p-column-title"> {{ l("PhoneNumber") }}</span>
                                                    {{ record.phoneNumber }}
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                    <div class="primeng-no-data" *ngIf="totalContact == 0">
                                        {{ l("NoData") }}
                                    </div>
                                    <div class="primeng-paging-container">
                                        <p-paginator [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark' : ''" [rows]="primengTableHelper.defaultRecordsCountPerPage" #paginator
                                            (onPageChange)="PaginatorContacts($event)"
                                            [rows]="20"
                                            [totalRecords]="primengTableHelper.totalRecordsCount"
                                            [rowsPerPageOptions]="[10,20,30]">
                                        </p-paginator>
                                        <span class="total-records-count">
                                            {{ l("TotalRecordsCount", primengTableHelper.totalRecordsCount) }}
                                        </span>
                                    </div>
                                </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="modal fade" id="quickAnswersModal" tabindex="-1" aria-labelledby="quickAnswersModal">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                    <form #ScheduleForm="ngForm">
                        <header class="user-profile-header">
                            <div class="modal-header">
                                <h1>Schedule Campaign</h1>
                            </div>
                        </header>
                        <div class="user-profile-sidebar-area" [perfectScrollbar]>
                            <div class="row">
                                <div class="customDiv">
                                    <label for="Schedule">Schedule Date</label>
                                    <input id="Schedule" name="Schedule" type="datetime-local"
                                        class="form-control customInput" [(ngModel)]="sendTime" required />
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="modal-footer" style="height: 139px">
                        <button type="button" class="btn btn-default" data-bs-dismiss="modal"
                            aria-label="Close">Cancel</button>

                        <button id="btn" type="button" class="btn btn-primary blue"
                            [disabled]="!ScheduleForm.form.valid" [buttonBusy]="saving" (click)="addScheduledCampaign()"
                            [busyText]="l('SavingWithThreeDot')">
                            <i class="fa fa-save"></i>
                            <span>{{ l("Save") }}</span>
                        </button>
                    </div>
                </div>
            </div>
        </div> -->
</div>

<scheduleCampaign #scheduleCampaign (modalSave)="ngOnInit()"></scheduleCampaign>
