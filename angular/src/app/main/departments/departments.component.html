<div [@routerTransition]>
    <div [ngClass]="darkModeService.currentSkin === 'dark' ? 'header-navbar-shadow-dark' : 'header-navbar-shadow'">
    </div>
    <div class="content-wrapper container-xxl p-0">
        <div class="content-body">
            <div class=" d-flex flex-column flex-column-fluid">
                <sub-header *ngIf="theme != 'theme12'" [title]="'departments' | localize"
                    [description]="'departmentsHeaderInfo' | localize">

                </sub-header>
                <sub-header *ngIf="theme === 'theme12'" [title]="'departments' | localize"
                    [description]="'departmentsHeaderInfo' | localize"> </sub-header>


                <div [ngClass]="theme != 'theme12' ? 'container' : ''">
                    <div class=" card-custom gutter-b"
                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-card' : 'card'">
                        <div class="card-body p-0" [ngClass]="theme != 'theme12' ? 'p-0' : ''">
                            <div class="   align-items-center">
                                <!--<Primeng-Datatable-Start>-->
                                <div [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : 'light'"
                                    class="primeng-datatable-container" [busyIf]="primengTableHelper.isLoading">
                                    <p-table #dataTable
                                        [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : 'light'"
                                        (onLazyLoad)="getDepartments($event)" class="table-responsive "
                                        [value]="primengTableHelper.records" rows="20" [paginator]="false" [lazy]="true"
                                        [scrollable]="true" ScrollWidth="100%"
                                        [responsive]="primengTableHelper.isResponsive"
                                        [resizableColumns]="primengTableHelper.resizableColumns">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                    style="width: 80px">{{l('Actions')}}</th>

                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                    style="width: 100px">
                                                    {{l('departments')}}
                                                    <!-- <p-sortIcon field="lockedByAgentName"></p-sortIcon> -->
                                                </th>

                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                    style="width: 100px">
                                                    {{l('type')}}
                                                    <!-- <p-sortIcon field="lockedByAgentName"></p-sortIcon> -->
                                                </th>

                                                <th [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark-table' : ''"
                                                    style="width: 100px">
                                                    {{l('assignedUser')}}
                                                </th>


                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                                            <tr>
                                                <td [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''"
                                                    style="width: 80px">
                                                    <div class="btn-group dropdown" dropdown container="body">
                                                        <button
                                                            [ngClass]="theme != 'theme12' ? 'btn-primary' : 'btn-primary-info'"
                                                            class="dropdown-toggle btn btn-sm " dropdownToggle>
                                                            <i class="fa fa-cog"></i><span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu"
                                                            [ngClass]="darkModeService.currentSkin === 'dark' ? 'drop-down-dark' : ''"
                                                            *dropdownMenu>
                                                            <li>
                                                                <a (click)="editDepartment.show(record)"
                                                                    href="javascript:;" class="dropdown-item">{{
                                                                    l("Edit") }}</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td>


                                                <td (click)="editDepartment.show(record)" [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''"
                                                    style="width:100px">
                                                    <span class="p-column-title"> {{l('Department')}}</span>
                                                    {{record.name}}
                                                </td>

                                                <td (click)="editDepartment.show(record)" *ngIf="record.isLiveChat"
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''"
                                                    style="width:100px">
                                                    <span class="p-column-title"> {{l('Type')}}</span>
                                                    Live Chat
                                                </td>

                                                <td (click)="editDepartment.show(record)" *ngIf="record.isSellingRequest"
                                                    [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''"
                                                    style="width:100px">
                                                    <span class="p-column-title"> {{l('Type')}}</span>
                                                    Request
                                                </td>
                                                        
                                                <td  [ngClass]="darkModeService.currentSkin === 'dark' ? 'table-dark' : ''"
                                                    style="width:100px">
                                                    <span class="p-column-title"> {{l('Assigned user ')}}</span>
                                                    {{record.userNames}}
                                                </td>


                                            </tr>

                                        </ng-template>
                                    </p-table>
                                    <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
                                        {{l('NoData')}}
                                    </div>
                                    <div class="primeng-paging-container">
                                        <p-paginator [ngClass]="darkModeService.currentSkin === 'dark' ? 'dark' : ''"
                                            [rows]="20" #paginator (onPageChange)="getDepartments($event)"
                                            [totalRecords]="primengTableHelper.totalRecordsCount"
                                            [rowsPerPageOptions]="[10,20,30]">
                                        </p-paginator>
                                        <span class="total-records-count">
                                            {{l('TotalRecordsCount', primengTableHelper.totalRecordsCount)}}
                                        </span>
                                    </div>
                                </div>
                                <!--<Primeng-Datatable-End>-->
                            </div>
                        </div>
                    </div>
                </div>
                <editDepartment #editDepartment (modalSave)="getDepartments($event)"></editDepartment>

            </div>
        </div>
    </div>
</div>